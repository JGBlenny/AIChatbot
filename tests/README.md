# æ¸¬è©¦å·¥å…·èªªæ˜

æœ¬ç›®éŒ„åŒ…å« AIChatbot ç³»çµ±çš„å„ç¨®æ¸¬è©¦è…³æœ¬å’Œå·¥å…·ã€‚

---

## ğŸ“‹ æ¸¬è©¦è…³æœ¬æ¸…å–®

### æ ¸å¿ƒåŠŸèƒ½æ¸¬è©¦

#### 1. test_action_type_validation.py
**ç”¨é€”**: é©—è­‰ action_type æ¬„ä½çš„æ­£ç¢ºæ€§

**åŠŸèƒ½**:
- æ¸¬è©¦ 6 ç¨®ä¸åŒå ´æ™¯çš„ API éŸ¿æ‡‰
- é©—è­‰ action_type å’Œ source_count æ­£ç¢ºæ€§
- ç”Ÿæˆ JSON æ ¼å¼æ¸¬è©¦å ±å‘Š

**åŸ·è¡Œæ–¹å¼**:
```bash
python3 tests/test_action_type_validation.py
```

**æ¸¬è©¦å ´æ™¯**:
- direct_answer - åŸºæœ¬æŸ¥è©¢
- direct_answer - é›»è²»æŸ¥è©¢
- direct_answer - ç„¡ç›¸é—œçŸ¥è­˜
- direct_answer - ä¸ç›¸é—œå•é¡Œ
- å¯èƒ½çš„ form_fill
- å¯èƒ½çš„ api_call

---

#### 2. test_edge_cases.py
**ç”¨é€”**: é‚Šç•Œæƒ…æ³å’Œç•°å¸¸è™•ç†æ¸¬è©¦

**åŠŸèƒ½**:
- æ¸¬è©¦ 13 ç¨®æ¥µç«¯è¼¸å…¥æƒ…æ³
- é©—è­‰å®‰å…¨æ€§ï¼ˆSQL æ³¨å…¥ã€XSS é˜²ç¦¦ï¼‰
- æ¸¬è©¦ Unicodeã€Emojiã€å¤šèªè¨€æ”¯æ´
- æª¢æŸ¥æ¥µé•·/æ¥µçŸ­è¼¸å…¥è™•ç†

**åŸ·è¡Œæ–¹å¼**:
```bash
python3 tests/test_edge_cases.py
```

**æ¸¬è©¦é¡åˆ¥**:
- ç©ºè¼¸å…¥ï¼ˆç©ºå­—ä¸²ã€ç´”ç©ºç™½ï¼‰
- æ¥µé•·æ–‡å­—ï¼ˆ1000+ å­—å…ƒï¼‰
- ç‰¹æ®Šå­—å…ƒå’Œå®‰å…¨æ¸¬è©¦
- Unicode å’Œ Emoji
- å¤šè¡Œè¼¸å…¥ã€æ•¸å€¼æ¥µå€¼

---

#### 3. comprehensive_dialogue_test_100.py
**ç”¨é€”**: ç¶œåˆå°è©±é‚è¼¯æ¸¬è©¦

**åŠŸèƒ½**:
- æ¸¬è©¦ 100 å‰‡å¤šèªæ„å¤šæƒ…å¢ƒå•é¡Œ
- æ¶µè“‹ç§Ÿé‡‘ã€ç¶­ä¿®ã€åˆç´„ã€å¸³å‹™ç­‰å ´æ™¯
- æ”¯æ´æ¨¡ç³Šå•é¡Œã€æ–¹è¨€ã€è‹±æ–‡ç°¡ç¨±
- ç”Ÿæˆè©³ç´°æ¸¬è©¦å ±å‘Š

**åŸ·è¡Œæ–¹å¼**:
```bash
python3 tests/comprehensive_dialogue_test_100.py
```

**æ¸¬è©¦é¡åˆ¥**:
- ç§Ÿé‡‘ï¼ˆ10 é¡Œï¼‰
- ç¶­ä¿®ï¼ˆ10 é¡Œï¼‰
- åˆç´„ï¼ˆ10 é¡Œï¼‰
- è¨­æ–½ï¼ˆ4 é¡Œï¼‰
- è¯çµ¡ï¼ˆ7 é¡Œï¼‰
- å¸³å‹™ï¼ˆ10 é¡Œï¼‰
- ç³»çµ±ï¼ˆ10 é¡Œï¼‰
- æ¨¡ç³Šå•é¡Œï¼ˆ5 é¡Œï¼‰
- è¤‡åˆå•é¡Œï¼ˆ5 é¡Œï¼‰
- é‚Šç•Œæƒ…æ³ï¼ˆ10+ é¡Œï¼‰

---

#### 4. analyze_test_results.py
**ç”¨é€”**: æ·±å…¥åˆ†ææ¸¬è©¦çµæœ

**åŠŸèƒ½**:
- å°è©±é‚è¼¯åˆ†æï¼ˆIntent Typeã€ä¾†æºåˆ†æï¼‰
- æŒ‰é¡åˆ¥çµ±è¨ˆ
- æ‰¾å‡ºæ½›åœ¨å•é¡Œæ¡ˆä¾‹
- ç”Ÿæˆæ”¹é€²å»ºè­°

**åŸ·è¡Œæ–¹å¼**:
```bash
python3 tests/analyze_test_results.py <result_file.json>
```

**ç¯„ä¾‹**:
```bash
python3 tests/analyze_test_results.py dialogue_test_results_20260212_122750.json
```

---

## ğŸ“ ç›®éŒ„çµæ§‹

```
tests/
â”œâ”€â”€ README.md                               # æœ¬æ–‡ä»¶
â”œâ”€â”€ test_action_type_validation.py          # action_type é©—è­‰æ¸¬è©¦
â”œâ”€â”€ test_edge_cases.py                      # é‚Šç•Œæ¸¬è©¦
â”œâ”€â”€ comprehensive_dialogue_test_100.py      # ç¶œåˆå°è©±æ¸¬è©¦
â”œâ”€â”€ analyze_test_results.py                 # æ¸¬è©¦çµæœåˆ†æå·¥å…·
â”œâ”€â”€ archive/                                # æ¸¬è©¦çµæœæ­¸æª”
â”‚   â””â”€â”€ 20260212_action_type_validation/   # 2026-02-12 é©—è­‰çµæœ
â”‚       â”œâ”€â”€ COMPREHENSIVE_VALIDATION_REPORT.md
â”‚       â”œâ”€â”€ action_type_test_results_*.json
â”‚       â”œâ”€â”€ edge_case_test_results_*.json
â”‚       â””â”€â”€ dialogue_test_results_*.json
â”œâ”€â”€ integration/                            # æ•´åˆæ¸¬è©¦
â”œâ”€â”€ manual/                                 # æ‰‹å‹•æ¸¬è©¦è…³æœ¬
â”œâ”€â”€ performance/                            # æ€§èƒ½æ¸¬è©¦
â””â”€â”€ data/                                   # æ¸¬è©¦æ•¸æ“š
```

---

## ğŸ”§ æ¸¬è©¦ç’°å¢ƒéœ€æ±‚

### å‰ç½®æ¢ä»¶
1. RAG Orchestrator æœå‹™é‹è¡Œä¸­ï¼ˆlocalhost:8100ï¼‰
2. Python 3.8+
3. å¿…è¦å¥—ä»¶ï¼šhttpx, asyncio

### å®‰è£ä¾è³´
```bash
pip install httpx asyncio
```

---

## ğŸ“Š æ¸¬è©¦å ±å‘Š

### è¼¸å‡ºæ ¼å¼
æ‰€æœ‰æ¸¬è©¦è…³æœ¬éƒ½æœƒç”Ÿæˆ JSON æ ¼å¼çš„è©³ç´°å ±å‘Šï¼ŒåŒ…å«ï¼š
- æ¸¬è©¦æ™‚é–“æˆ³
- æ¸¬è©¦æ¡ˆä¾‹æ•¸é‡
- æˆåŠŸ/å¤±æ•—çµ±è¨ˆ
- è©³ç´°çš„æ¯å€‹æ¸¬è©¦æ¡ˆä¾‹çµæœ
- action_type åˆ†å¸ƒçµ±è¨ˆ

### å ±å‘Šä½ç½®
- å³æ™‚æ¸¬è©¦å ±å‘Šï¼šç”Ÿæˆåœ¨ç•¶å‰ç›®éŒ„
- æ­·å²å ±å‘Šæ­¸æª”ï¼š`tests/archive/YYYYMMDD_description/`

---

## ğŸ¯ æ¸¬è©¦æœ€ä½³å¯¦è¸

### 1. å®šæœŸæ¸¬è©¦
å»ºè­°åœ¨ä»¥ä¸‹æƒ…æ³åŸ·è¡Œå®Œæ•´æ¸¬è©¦ï¼š
- ä¿®æ”¹ chat.py æˆ– chat_shared.py
- æ›´æ–°è³‡æ–™åº« schema
- æ–°å¢æˆ–ä¿®æ”¹ action_type é‚è¼¯
- éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒå‰

### 2. æ¸¬è©¦é †åº
```bash
# 1. åŠŸèƒ½é©—è­‰
python3 tests/test_action_type_validation.py

# 2. é‚Šç•Œæ¸¬è©¦
python3 tests/test_edge_cases.py

# 3. ç¶œåˆæ¸¬è©¦ï¼ˆè¼ƒè€—æ™‚ï¼‰
python3 tests/comprehensive_dialogue_test_100.py

# 4. çµæœåˆ†æ
python3 tests/analyze_test_results.py <latest_results.json>
```

### 3. çµæœè§£è®€
- **100% é€šé**: ç³»çµ±é‹ä½œæ­£å¸¸
- **95-99% é€šé**: å¯èƒ½æœ‰è¼•å¾®å•é¡Œï¼Œå»ºè­°æª¢æŸ¥å¤±æ•—æ¡ˆä¾‹
- **< 95% é€šé**: é‡å¤§å•é¡Œï¼Œéœ€ç«‹å³ä¿®å¾©

---

## âš ï¸ æ³¨æ„äº‹é …

### åŸ·è¡Œæ™‚é–“
- `test_action_type_validation.py`: ~30 ç§’ï¼ˆ6 å€‹æ¸¬è©¦ï¼‰
- `test_edge_cases.py`: ~40 ç§’ï¼ˆ13 å€‹æ¸¬è©¦ï¼‰
- `comprehensive_dialogue_test_100.py`: ~5-10 åˆ†é˜ï¼ˆ100 å€‹æ¸¬è©¦ï¼‰

### æ¸¬è©¦è³‡æ–™
- æ‰€æœ‰æ¸¬è©¦ä½¿ç”¨ vendor_id=1
- æ¸¬è©¦ä¸æœƒä¿®æ”¹è³‡æ–™åº«æ•¸æ“š
- ä½¿ç”¨çœŸå¯¦ API ç«¯é»ï¼ˆéœ€ç¢ºä¿æœå‹™é‹è¡Œï¼‰

### æ¸…ç†
æ¸¬è©¦çµæœæ–‡ä»¶æœƒè‡ªå‹•åŠ ä¸Šæ™‚é–“æˆ³ï¼Œå»ºè­°å®šæœŸæ¸…ç†ï¼š
```bash
# ç§»å‹•èˆŠæ¸¬è©¦çµæœåˆ°æ­¸æª”
mv *_test_results_*.json tests/archive/YYYYMMDD_description/
```

---

## ğŸ› å•é¡Œæ’æŸ¥

### æ¸¬è©¦å¤±æ•—
1. ç¢ºèªæœå‹™é‹è¡Œï¼š`docker-compose ps`
2. æª¢æŸ¥æœå‹™æ—¥èªŒï¼š`docker-compose logs rag-orchestrator`
3. é©—è­‰ API ç«¯é»ï¼š`curl http://localhost:8100/health`

### è¶…æ™‚éŒ¯èª¤
- å¢åŠ  timeout åƒæ•¸ï¼ˆé è¨­ 30 ç§’ï¼‰
- æª¢æŸ¥ç¶²è·¯é€£ç·š
- ç¢ºèªæœå‹™è³‡æºå……è¶³

### JSON è§£æéŒ¯èª¤
- æª¢æŸ¥ API éŸ¿æ‡‰æ ¼å¼
- ç¢ºèªæœå‹™ç‰ˆæœ¬æ­£ç¢º
- æŸ¥çœ‹ raw_response å…§å®¹

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- å®Œæ•´é©—è­‰å ±å‘Šï¼š`tests/archive/20260212_action_type_validation/COMPREHENSIVE_VALIDATION_REPORT.md`
- ç³»çµ±æ›´æ–°ç´€éŒ„ï¼š`docs/UPDATE_NOTES_2026-02-12.md`
- API æ–‡æª”ï¼š`docs/api/`

---

## ğŸ”„ ç‰ˆæœ¬è¨˜éŒ„

### v2.0.1 (2026-02-12)
- æ–°å¢ test_action_type_validation.py
- æ–°å¢ test_edge_cases.py
- æ›´æ–° comprehensive_dialogue_test_100.py
- å®Œæˆ action_type å…¨é¢é©—è­‰

### v2.0.0 (2026-01-28)
- åˆå§‹æ¸¬è©¦æ¡†æ¶å»ºç«‹
- åŸºæœ¬åŠŸèƒ½æ¸¬è©¦è…³æœ¬

---

**æœ€å¾Œæ›´æ–°**: 2026-02-12
**ç¶­è­·è€…**: Development Team
