=== 回測執行時間: 2025-10-30 09:09:36.520176 ===

返回碼: 0

=== STDOUT ===
============================================================
知識庫回測框架
============================================================
✅ 品質評估模式: detailed
✅ 測試題庫來源: 資料庫 (aichatbot_admin)

🎯 測試選擇策略: failed_only
📖 從資料庫載入測試情境（策略: failed_only）...
   策略: 失敗 + 未測試（avg_score < 0.6 或失敗率 > 50% 或未測試）
   限制: 50 個
   ✅ 載入 12 個測試情境

🧪 非交互模式：執行全部 12 個測試

🧪 開始回測...
   測試情境數：12

[1/12] 測試問題: 押金怎麼退？...
   ⚙️  回測模式：已跳過 SOP 檢索，僅檢索通用知識庫（skip_sop=true）
   ✅ PASS (分數: 1.00)
   📚 知識來源 (3 個):
      1. [ID 93] 如何處理租客的押金退還狀態？
      2. [ID 6] 退租押金如何退還
      3. [ID 359] 房客在退押金時是否可以填寫帳戶資訊？
   🔗 直接鏈接:
      1. http://localhost:8080/#/knowledge?search=93
      2. http://localhost:8080/#/knowledge?search=6
      3. http://localhost:8080/#/knowledge?search=359
   📦 批量查詢: http://localhost:8080/#/knowledge?ids=93,6,359

[2/12] 測試問題: 我想養寵物可以嗎？...
   ✅ PASS (分數: 1.00)
   📚 知識來源 (1 個):
      1. [ID 497] 可以養寵物嗎
   🔗 直接鏈接:
      1. http://localhost:8080/#/knowledge?search=497
   📦 批量查詢: http://localhost:8080/#/knowledge?ids=497

[3/12] 測試問題: 可以養寵物嗎...
   ✅ PASS (分數: 1.00)
   📚 知識來源 (1 個):
      1. [ID 497] 可以養寵物嗎
   🔗 直接鏈接:
      1. http://localhost:8080/#/knowledge?search=497
   📦 批量查詢: http://localhost:8080/#/knowledge?ids=497

[4/12] 測試問題: 什麼是租賃契約？...
   ✅ PASS (分數: 1.00)

[5/12] 測試問題: 借址營登費用及服務內容...
   ❌ API 請求失敗: HTTPConnectionPool(host='rag-orchestrator', port=8100): Read timed out. (read timeout=30)
   ❌ FAIL (分數: 0.00)
   系統無法回應，請檢查 RAG API 是否正常運作

[6/12] 測試問題: 空調無法啟動：...
   ❌ API 請求失敗: HTTPConnectionPool(host='rag-orchestrator', port=8100): Read timed out. (read timeout=30)
   ❌ FAIL (分數: 0.00)
   系統無法回應，請檢查 RAG API 是否正常運作

[7/12] 測試問題: 空調無法啟動...
   ❌ API 請求失敗: HTTPConnectionPool(host='rag-orchestrator', port=8100): Read timed out. (read timeout=30)
   ❌ FAIL (分數: 0.00)
   系統無法回應，請檢查 RAG API 是否正常運作

[8/12] 測試問題: 我可以養寵物嗎...
   ❌ API 請求失敗: HTTPConnectionPool(host='rag-orchestrator', port=8100): Read timed out. (read timeout=30)
   ❌ FAIL (分數: 0.00)
   系統無法回應，請檢查 RAG API 是否正常運作

[9/12] 測試問題: 我的合約什麼時候到期？...
   ❌ API 請求失敗: HTTPConnectionPool(host='rag-orchestrator', port=8100): Read timed out. (read timeout=30)
   ❌ FAIL (分數: 0.00)
   系統無法回應，請檢查 RAG API 是否正常運作

[10/12] 測試問題: 房間可以釘釘子嗎？...
   ❌ API 請求失敗: HTTPConnectionPool(host='rag-orchestrator', port=8100): Read timed out. (read timeout=30)
   ❌ FAIL (分數: 0.00)
   系統無法回應，請檢查 RAG API 是否正常運作

[11/12] 測試問題: 電費是怎麼算的？...
   ❌ API 請求失敗: HTTPConnectionPool(host='rag-orchestrator', port=8100): Read timed out. (read timeout=30)
   ❌ FAIL (分數: 0.00)
   系統無法回應，請檢查 RAG API 是否正常運作

[12/12] 測試問題: 如何使用系統報修功能？...
   ❌ API 請求失敗: HTTPConnectionPool(host='rag-orchestrator', port=8100): Read timed out. (read timeout=30)
   ❌ FAIL (分數: 0.00)
   系統無法回應，請檢查 RAG API 是否正常運作

📊 生成回測報告...
   ✅ 詳細結果已儲存: /app/output/backtest/backtest_results.xlsx
   ✅ 摘要報告已儲存: /app/output/backtest/backtest_results_summary.txt

============================================================
回測摘要
============================================================
通過率：16.67% (2/12)
平均分數（基礎）：0.33
平均信心度：0.30

🎯 LLM 品質評估統計 (4 個測試):
   相關性：3.50/5.0
   完整性：3.25/5.0
   準確性：3.50/5.0
   意圖匹配：3.50/5.0
   綜合評分：3.25/5.0
   NDCG@3：0.7000
============================================================


💾 儲存回測結果到資料庫...
   ✅ 建立回測執行記錄 (Run ID: 21)
   ✅ 儲存 12 個測試結果到資料庫
   📊 回測執行 ID: 21
   ⏱️  執行時間: 286 秒
✅ 回測完成！


=== STDERR ===
