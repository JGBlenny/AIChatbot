# âœ… æ¸¬è©¦æ•¸æ“šå»ºç«‹å®Œæ•´æ‘˜è¦

**å»ºç«‹æ™‚é–“**: 2026-01-26
**ç‹€æ…‹**: âœ… å®Œæ•´å»ºç«‹ä¸¦é©—è­‰
**Vendor ID**: 2

---

## ðŸ“Š å·²å»ºç«‹çš„æ¸¬è©¦æ•¸æ“š

### 1. æ¸¬è©¦ SOPï¼ˆ6 å€‹ï¼‰

| SOP ID | SOP åç¨± | è§¸ç™¼æ¨¡å¼ | å¾ŒçºŒå‹•ä½œ | å¼•ç”¨è¡¨å–® ID | ç‹€æ…‹ |
|--------|----------|----------|----------|-------------|------|
| **1672** | ã€æ¸¬è©¦ã€‘ç§Ÿé‡‘ç¹³ç´èªªæ˜Ž | none | none | - | âœ… |
| **1673** | ã€æ¸¬è©¦ã€‘ç¶²è·¯ä¸é€šæŽ’æŸ¥ | manual | form_fill | test_network_maintenance | âœ… |
| **1674** | ã€æ¸¬è©¦ã€‘é–€éŽ–æ•…éšœç·Šæ€¥ | immediate | form_fill | test_door_lock_repair | âœ… |
| **1675** | ã€æ¸¬è©¦ã€‘ç†±æ°´å™¨æ²’ç†±æ°´ | manual | none | - | âœ… |
| **1676** | ã€æ¸¬è©¦ã€‘æŸ¥è©¢ç¹³è²»è¨˜éŒ„ | immediate | none | - | âœ… |
| **1677** | ã€æ¸¬è©¦ã€‘å…¬è¨­ä½¿ç”¨è¦å®š | none | none | - | âœ… |

### 2. æ¸¬è©¦è¡¨å–®ï¼ˆ2 å€‹ï¼‰â­ æ–°å»ºç«‹

| è¡¨å–® ID | è¡¨å–®åç¨± | Vendor ID | æ¬„ä½æ•¸ | ç‹€æ…‹ |
|---------|---------|-----------|--------|------|
| **6** | test_network_maintenance | ã€æ¸¬è©¦ã€‘ç¶²è·¯ç¶­ä¿®ç”³è«‹è¡¨ | 2 | 5 | âœ… |
| **7** | test_door_lock_repair | ã€æ¸¬è©¦ã€‘é–€éŽ–ç·Šæ€¥ç¶­ä¿®è¡¨ | 2 | 5 | âœ… |

---

## ðŸ“‹ è¡¨å–®è©³ç´°è³‡è¨Š

### è¡¨å–® 1: ç¶²è·¯ç¶­ä¿®ç”³è«‹è¡¨

**Form ID**: `test_network_maintenance`
**ç”¨é€”**: é…åˆã€Œç¶²è·¯ä¸é€šæŽ’æŸ¥ã€SOPï¼ˆID 1673ï¼‰

**æ¬„ä½**ï¼š
1. **æˆ¿è™Ÿ** (room_number) - å¿…å¡«
   - æç¤ºï¼šè«‹æä¾›æ‚¨çš„æˆ¿è™Ÿï¼ˆä¾‹å¦‚ï¼šA101ï¼‰

2. **å•é¡Œæè¿°** (issue_description) - å¿…å¡«
   - æç¤ºï¼šè«‹æè¿°ç¶²è·¯é€£ç·šå•é¡Œï¼ˆä¾‹å¦‚ï¼šå®Œå…¨ç„¡æ³•é€£ç·šã€é€Ÿåº¦å¾ˆæ…¢ã€æ–·æ–·çºŒçºŒï¼‰

3. **å·²å˜—è©¦çš„æŽ’æŸ¥æ­¥é©Ÿ** (troubleshooting_steps) - å¿…å¡«
   - æç¤ºï¼šè«‹å‘Šè¨´æˆ‘æ‚¨å·²ç¶“å˜—è©¦éŽå“ªäº›æ­¥é©Ÿï¼ˆä¾‹å¦‚ï¼šé‡å•Ÿè·¯ç”±å™¨ã€æª¢æŸ¥ç¶²è·¯ç·šï¼‰

4. **è¯çµ¡é›»è©±** (contact_phone) - å¿…å¡«
   - æç¤ºï¼šè«‹æä¾›æ‚¨çš„è¯çµ¡é›»è©±

5. **æ–¹ä¾¿è¯çµ¡æ™‚é–“** (preferred_time) - é¸å¡«
   - æç¤ºï¼šè«‹å‘Šè¨´æˆ‘æ‚¨æ–¹ä¾¿æŽ¥è½é›»è©±çš„æ™‚é–“ï¼ˆä¾‹å¦‚ï¼šå¹³æ—¥ä¸Šåˆã€é€±æœ«å…¨å¤©ï¼‰

### è¡¨å–® 2: é–€éŽ–ç·Šæ€¥ç¶­ä¿®è¡¨

**Form ID**: `test_door_lock_repair`
**ç”¨é€”**: é…åˆã€Œé–€éŽ–æ•…éšœç·Šæ€¥ã€SOPï¼ˆID 1674ï¼‰

**æ¬„ä½**ï¼š
1. **æˆ¿è™Ÿ** (room_number) - å¿…å¡«
   - æç¤ºï¼šè«‹æä¾›æ‚¨çš„æˆ¿è™Ÿï¼ˆä¾‹å¦‚ï¼šA101ï¼‰

2. **å•é¡Œé¡žåž‹** (issue_type) - å¿…å¡«
   - æç¤ºï¼šè«‹é¸æ“‡å•é¡Œé¡žåž‹ï¼š1-ç„¡æ³•é–‹é–€ã€2-ç„¡æ³•éŽ–é–€ã€3-é‘°åŒ™å¡å¤±éˆ

3. **ç·Šæ€¥ç¨‹åº¦** (urgency_level) - å¿…å¡«
   - æç¤ºï¼šè«‹é¸æ“‡ç·Šæ€¥ç¨‹åº¦ï¼š1-ä¸€èˆ¬ï¼ˆå¯ç­‰å¾…ï¼‰ã€2-ç·Šæ€¥ï¼ˆç•¶æ—¥è™•ç†ï¼‰ã€3-éžå¸¸ç·Šæ€¥ï¼ˆç«‹å³è™•ç†ï¼‰

4. **è¯çµ¡é›»è©±** (contact_phone) - å¿…å¡«
   - æç¤ºï¼šè«‹æä¾›æ‚¨çš„è¯çµ¡é›»è©±

5. **æ˜¯å¦åœ¨å®¶ç­‰å¾…** (waiting_at_home) - å¿…å¡«
   - æç¤ºï¼šæ‚¨ç›®å‰æ˜¯å¦åœ¨å®¶ç­‰å¾…ç¶­ä¿®äººå“¡ï¼Ÿï¼ˆæ˜¯/å¦ï¼‰

---

## ðŸ”„ SOP èˆ‡è¡¨å–®å°æ‡‰é—œä¿‚

| SOP | è¡¨å–® | æ¸¬è©¦é‡é»ž |
|-----|------|----------|
| 1673 - ç¶²è·¯ä¸é€šæŽ’æŸ¥ | test_network_maintenance | æŽ’æŸ¥åž‹ + è¡¨å–®è§¸ç™¼ï¼ˆmanual + form_fillï¼‰|
| 1674 - é–€éŽ–æ•…éšœç·Šæ€¥ | test_door_lock_repair | è¡Œå‹•åž‹ + è¡¨å–®è§¸ç™¼ï¼ˆimmediate + form_fillï¼‰|

---

## ðŸ§ª å¦‚ä½•é©—è­‰

### 1. åœ¨å‰ç«¯æŸ¥çœ‹è¡¨å–®

è¨ªå•ï¼š**http://localhost:8087/forms**

**æ‡‰è©²çœ‹åˆ°**ï¼š
- ã€æ¸¬è©¦ã€‘ç¶²è·¯ç¶­ä¿®ç”³è«‹è¡¨ï¼ˆæ¥­è€… 2ï¼Œ5 å€‹æ¬„ä½ï¼‰
- ã€æ¸¬è©¦ã€‘é–€éŽ–ç·Šæ€¥ç¶­ä¿®è¡¨ï¼ˆæ¥­è€… 2ï¼Œ5 å€‹æ¬„ä½ï¼‰

**ç¯©é¸å™¨è¨­å®š**ï¼š
- é¸æ“‡ã€Œæ¥­è€… 2ã€æˆ–ã€Œå…¨éƒ¨æ¥­è€…ã€æ‰èƒ½çœ‹åˆ°æ¸¬è©¦è¡¨å–®

### 2. åœ¨å‰ç«¯æŸ¥çœ‹ SOP

è¨ªå•ï¼š**http://localhost:8087/vendor-sop**

**æ‡‰è©²çœ‹åˆ°**ï¼š
- åˆ‡æ›åˆ° Vendor ID: 2
- 6 å€‹ã€æ¸¬è©¦ã€‘é–‹é ­çš„ SOP
- å…¶ä¸­ 2 å€‹ SOPï¼ˆ1673, 1674ï¼‰æ‡‰è©²é¡¯ç¤ºæœ‰é—œè¯è¡¨å–®

### 3. é©—è­‰è³‡æ–™åº«

```bash
# é©—è­‰è¡¨å–®
docker-compose exec -T postgres psql -U aichatbot -d aichatbot_admin -c \
  "SELECT id, form_id, form_name, vendor_id FROM form_schemas WHERE vendor_id = 2;"

# é©—è­‰ SOP
docker-compose exec -T postgres psql -U aichatbot -d aichatbot_admin -c \
  "SELECT id, item_name, trigger_mode, next_action, next_form_id
   FROM vendor_sop_items WHERE id >= 1672 AND id <= 1677;"
```

---

## ðŸ“– æ¸¬è©¦å°è©±ç¯„ä¾‹

### æƒ…å¢ƒ 1: æŽ’æŸ¥åž‹ + è¡¨å–®ï¼ˆSOP 1673ï¼‰

```
ðŸ‘¤ ç§Ÿæˆ¶: ç¶²è·¯é€£ä¸ä¸Š

ðŸ¤– ç³»çµ±: ðŸŒ **ç¶²è·¯é€£ç·šå•é¡ŒæŽ’æŸ¥**

        è«‹å…ˆä¾ç…§ä»¥ä¸‹æ­¥é©ŸæŽ’æŸ¥ï¼š

        **æ­¥é©Ÿ 1ï¼šæª¢æŸ¥å¯¦é«”é€£ç·š**
        â–¡ ç¢ºèªç¶²è·¯ç·šæ˜¯å¦æ’å¥½
        [... æŽ’æŸ¥æ­¥é©Ÿ ...]

        å¦‚æžœä»¥ä¸Šæ­¥é©Ÿéƒ½è©¦éŽäº†é‚„æ˜¯ç„¡æ³•é€£ç·šï¼Œè«‹å‘Šè¨´æˆ‘ã€‚

ðŸ‘¤ ç§Ÿæˆ¶: éƒ½è©¦éŽäº†é‚„æ˜¯ä¸è¡Œ

ðŸ¤– ç³»çµ±: å¥½çš„ï¼Œæˆ‘ä¾†å”åŠ©æ‚¨å¡«å¯«ç¶²è·¯ç¶­ä¿®è¡¨å–®ã€‚

        ã€ç¶²è·¯ç¶­ä¿®ç”³è«‹è¡¨ã€‘

        1ï¸âƒ£ è«‹æä¾›æ‚¨çš„æˆ¿è™Ÿï¼ˆä¾‹å¦‚ï¼šA101ï¼‰

ðŸ‘¤ ç§Ÿæˆ¶: A301

ðŸ¤– ç³»çµ±: 2ï¸âƒ£ è«‹æè¿°ç¶²è·¯é€£ç·šå•é¡Œ

ðŸ‘¤ ç§Ÿæˆ¶: å®Œå…¨ç„¡æ³•é€£ç·š

ðŸ¤– ç³»çµ±: 3ï¸âƒ£ è«‹å‘Šè¨´æˆ‘æ‚¨å·²ç¶“å˜—è©¦éŽå“ªäº›æ­¥é©Ÿ

... [ç¹¼çºŒè¡¨å–®å¡«å¯«æµç¨‹]
```

### æƒ…å¢ƒ 2: è¡Œå‹•åž‹ + è¡¨å–®ï¼ˆSOP 1674ï¼‰

```
ðŸ‘¤ ç§Ÿæˆ¶: é–€éŽ–å£žäº†

ðŸ¤– ç³»çµ±: ðŸšª **é–€éŽ–æ•…éšœç·Šæ€¥è™•ç†**

        **ç«‹å³è™•ç†æ–¹å¼**ï¼š
        [... è™•ç†èªªæ˜Ž ...]

        é€™æ˜¯ç·Šæ€¥ç¶­ä¿®ç‹€æ³ï¼Œæˆ‘å¯ä»¥ç«‹å³ç‚ºæ‚¨å®‰æŽ’ç¶­ä¿®äººå“¡ã€‚éœ€è¦å—Žï¼Ÿ

ðŸ‘¤ ç§Ÿæˆ¶: è¦

ðŸ¤– ç³»çµ±: å¥½çš„ï¼Œè«‹æä¾›ä»¥ä¸‹è³‡è¨Šï¼Œæˆ‘æœƒç›¡å¿«å®‰æŽ’ç¶­ä¿®äººå“¡ã€‚

        ã€é–€éŽ–ç·Šæ€¥ç¶­ä¿®è¡¨ã€‘

        1ï¸âƒ£ è«‹æä¾›æ‚¨çš„æˆ¿è™Ÿï¼ˆä¾‹å¦‚ï¼šA101ï¼‰

ðŸ‘¤ ç§Ÿæˆ¶: B205

ðŸ¤– ç³»çµ±: 2ï¸âƒ£ è«‹é¸æ“‡å•é¡Œé¡žåž‹ï¼š
        1-ç„¡æ³•é–‹é–€
        2-ç„¡æ³•éŽ–é–€
        3-é‘°åŒ™å¡å¤±éˆ

... [ç¹¼çºŒè¡¨å–®å¡«å¯«æµç¨‹]
```

---

## ðŸ—‘ï¸ æ¸…ç†æ¸¬è©¦æ•¸æ“š

æ¸¬è©¦å®Œæˆå¾Œï¼ŒåŸ·è¡Œä»¥ä¸‹å‘½ä»¤æ¸…ç†ï¼š

### æ–¹æ³• 1: ä½¿ç”¨è…³æœ¬
```bash
# æ¸…ç†æ¸¬è©¦ SOP
python3 cleanup_test_sop.py

# æ¸…ç†æ¸¬è©¦è¡¨å–®
python3 cleanup_test_forms.py
```

### æ–¹æ³• 2: ç›´æŽ¥åˆªé™¤
```sql
-- åˆªé™¤æ¸¬è©¦ SOP
DELETE FROM vendor_sop_items WHERE id >= 1672 AND id <= 1677;

-- åˆªé™¤æ¸¬è©¦è¡¨å–®
DELETE FROM form_schemas WHERE id IN (6, 7);
```

---

## âœ… é©—è­‰æª¢æŸ¥æ¸…å–®

### è³‡æ–™åº«å±¤ç´š
- [x] 6 å€‹æ¸¬è©¦ SOP å·²å»ºç«‹
- [x] 2 å€‹æ¸¬è©¦è¡¨å–®å·²å»ºç«‹
- [x] SOP æ­£ç¢ºå¼•ç”¨è¡¨å–®ï¼ˆ1673 â†’ test_network_maintenance, 1674 â†’ test_door_lock_repairï¼‰
- [x] æ‰€æœ‰æµç¨‹é…ç½®æ¬„ä½å®Œæ•´
- [x] Embeddings å·²ç”Ÿæˆ

### å‰ç«¯å±¤ç´šï¼ˆå¾…æ‰‹å‹•é©—è­‰ï¼‰
- [ ] åœ¨ /forms é é¢å¯ä»¥çœ‹åˆ° 2 å€‹æ¸¬è©¦è¡¨å–®
- [ ] åœ¨ /vendor-sop é é¢å¯ä»¥çœ‹åˆ° 6 å€‹æ¸¬è©¦ SOP
- [ ] SOP ç·¨è¼¯é é¢å¯ä»¥é¸æ“‡æ¸¬è©¦è¡¨å–®

### æ‡‰ç”¨å±¤ç´šï¼ˆå¾…å°è©±æ¸¬è©¦ï¼‰
- [ ] æŽ’æŸ¥åž‹ SOP ä¸æœƒä¸»å‹•å•ã€Œè¦ä¸è¦ï¼Ÿã€
- [ ] æŽ’æŸ¥åž‹ SOP èªªé—œéµè©žå¾Œæ­£ç¢ºè§¸ç™¼è¡¨å–®
- [ ] è¡Œå‹•åž‹ SOP ç«‹å³ä¸»å‹•è©¢å•
- [ ] è¡¨å–®å¡«å¯«æµç¨‹æ­£å¸¸é‹ä½œ

---

## ðŸ“‚ ç›¸é—œæª”æ¡ˆ

- âœ… `create_test_sop_scenarios.py` - å»ºç«‹æ¸¬è©¦ SOPï¼ˆå·²åŸ·è¡Œï¼‰
- âœ… `create_test_forms.py` - å»ºç«‹æ¸¬è©¦è¡¨å–®ï¼ˆå·²åŸ·è¡Œï¼‰
- âœ… `test_sop_scenarios_dialogue.md` - è©³ç´°æ¸¬è©¦å°è©±è…³æœ¬
- âœ… `cleanup_test_sop.py` - æ¸…ç†æ¸¬è©¦ SOP
- â¸ï¸ `cleanup_test_forms.py` - æ¸…ç†æ¸¬è©¦è¡¨å–®ï¼ˆå¾…å»ºç«‹ï¼‰
- âœ… `TEST_DATA_COMPLETE_SUMMARY.md` - æœ¬æ–‡æª”

---

## ðŸŽ‰ ç¸½çµ

âœ… **æ‰€æœ‰æ¸¬è©¦æ•¸æ“šå·²å®Œæ•´å»ºç«‹ï¼**

- âœ… 6 å€‹æ¸¬è©¦ SOP æ¶µè“‹ 3 ç¨®è§¸ç™¼æ¨¡å¼ï¼ˆnone, manual, immediateï¼‰
- âœ… 2 å€‹æ¸¬è©¦è¡¨å–®é‡å°å…·é«”æƒ…å¢ƒè¨­è¨ˆï¼ˆç¶²è·¯ç¶­ä¿®ã€é–€éŽ–ç·Šæ€¥ï¼‰
- âœ… SOP èˆ‡è¡¨å–®æ­£ç¢ºé—œè¯
- âœ… è³‡æ–™åº«é©—è­‰ 100% é€šéŽ

**ç¾åœ¨å¯ä»¥é€²è¡Œå®Œæ•´çš„æ¸¬è©¦é©—è­‰ï¼**

1. å‰ç«¯æŸ¥çœ‹ï¼šhttp://localhost:8087/formsï¼ˆæŸ¥çœ‹è¡¨å–®ï¼‰
2. å‰ç«¯æŸ¥çœ‹ï¼šhttp://localhost:8087/vendor-sopï¼ˆæŸ¥çœ‹ SOPï¼‰
3. å°è©±æ¸¬è©¦ï¼šåƒè€ƒ `test_sop_scenarios_dialogue.md`
