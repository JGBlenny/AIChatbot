# Target User Config å¯¦ä½œå®Œæˆå ±å‘Š

**æ—¥æœŸ**: 2025-10-28
**ç‹€æ…‹**: âœ… å®Œæˆ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ¬¡æ›´æ–°å¯¦ä½œäº†å®Œæ•´çš„ç›®æ¨™ç”¨æˆ¶é…ç½®ç®¡ç†ç³»çµ±ï¼Œå–ä»£èˆŠæœ‰çš„å—çœ¾é…ç½®ï¼ˆAudience Configï¼‰ï¼Œä¸¦å„ªåŒ–äº†æ‰€æœ‰é…ç½®ç®¡ç†ä»‹é¢ï¼Œç§»é™¤ä¸å¿…è¦çš„æ¬„ä½ï¼Œç°¡åŒ–ç³»çµ±ç¶­è­·ã€‚

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. Target User Config ç®¡ç†é é¢

å‰µå»ºäº†å®Œæ•´çš„ç›®æ¨™ç”¨æˆ¶é…ç½® CRUD ç®¡ç†ä»‹é¢ï¼š

**å‰ç«¯é é¢**: `/target-users-config`
- âœ… åˆ—è¡¨å±•ç¤ºæ‰€æœ‰ç›®æ¨™ç”¨æˆ¶é¡å‹
- âœ… æ–°å¢ç›®æ¨™ç”¨æˆ¶é¡å‹
- âœ… ç·¨è¼¯ç›®æ¨™ç”¨æˆ¶è³‡è¨Š
- âœ… å•Ÿç”¨/åœç”¨ç›®æ¨™ç”¨æˆ¶ï¼ˆè»Ÿåˆªé™¤ï¼‰
- âœ… è­¦å‘Šæç¤ºæ¡†èªªæ˜åŠŸèƒ½å°šæœªç”Ÿæ•ˆï¼ˆéœ€è¦ç”¨æˆ¶ç™»å…¥ç³»çµ±ï¼‰

**å¾Œç«¯ API ç«¯é»**:
- `GET /api/target-users` - å–å¾—å•Ÿç”¨çš„ç›®æ¨™ç”¨æˆ¶åˆ—è¡¨ï¼ˆä¾›çŸ¥è­˜åº«é¸æ“‡å™¨ä½¿ç”¨ï¼‰
- `GET /api/target-users-config` - å–å¾—æ‰€æœ‰ç›®æ¨™ç”¨æˆ¶é…ç½®ï¼ˆç®¡ç†ç”¨ï¼‰
- `POST /api/target-users-config` - æ–°å¢ç›®æ¨™ç”¨æˆ¶
- `PUT /api/target-users-config/{user_value}` - æ›´æ–°ç›®æ¨™ç”¨æˆ¶
- `DELETE /api/target-users-config/{user_value}` - åœç”¨ç›®æ¨™ç”¨æˆ¶ï¼ˆè»Ÿåˆªé™¤ï¼‰

### 2. é·ç§»èˆ‡æ¸…ç†

#### 2.1 å¾ Audience Config é·ç§»åˆ° Target User Config

**ç§»é™¤çš„æª”æ¡ˆ**:
- `AudienceConfigView.vue` - èˆŠçš„å—çœ¾é…ç½®é é¢

**æ›´æ–°çš„è·¯ç”±**:
```javascript
// èˆŠè·¯ç”±é‡å®šå‘åˆ°æ–°è·¯ç”±
{
  path: '/audience-config',
  redirect: '/target-users-config'
}
```

**æ›´æ–°çš„å°èˆªé¸å–®**:
- åç¨±: "å—çœ¾é…ç½®" â†’ "ç›®æ¨™ç”¨æˆ¶"
- åœ–ç¤º: ğŸ‘¤ â†’ ğŸ‘¥
- è·¯å¾‘: `/audience-config` â†’ `/target-users-config`

#### 2.2 ç§»é™¤ä¸å¿…è¦çš„æ¬„ä½

**ç§»é™¤çš„æ¬„ä½**:
1. **icon** (åœ–ç¤º)
   - å‰ç«¯è¡¨å–®ï¼šå®Œå…¨ç§»é™¤ icon è¼¸å…¥æ¬„ä½
   - å‰ç«¯é¡¯ç¤ºï¼šç§»é™¤çŸ¥è­˜åº«é¸æ“‡å™¨ä¸­çš„åœ–ç¤ºé¡¯ç¤º
   - è³‡æ–™åº«ï¼šå°‡æ‰€æœ‰è¡¨çš„ icon æ¬„ä½è¨­ç‚º NULL

2. **display_order** (é¡¯ç¤ºé †åº)
   - å‰ç«¯è¡¨å–®ï¼šå®Œå…¨ç§»é™¤ display_order è¼¸å…¥æ¬„ä½
   - å¾Œç«¯æ’åºï¼šæ”¹ç”¨ `ORDER BY id` å–ä»£ `ORDER BY display_order`

**è³‡æ–™åº«æ¸…ç†**:
```sql
-- æ¸…é™¤ business_types_config çš„ icon
UPDATE business_types_config SET icon = NULL;  -- å½±éŸ¿ 3 ç­†è³‡æ–™

-- æ¸…é™¤ target_user_config çš„ icon
UPDATE target_user_config SET icon = NULL;  -- å½±éŸ¿ 4 ç­†è³‡æ–™
```

### 3. æ’åºæ©Ÿåˆ¶å„ªåŒ–

**è®Šæ›´çš„æª”æ¡ˆ**:

1. **knowledge-admin/backend/app.py**
   - Line 575: `/api/target-users` - æ”¹ç”¨ `ORDER BY id`
   - Line 607: `/api/target-users-config` - æ”¹ç”¨ `ORDER BY id`
   - Line 1509: Category config - æ”¹ç”¨ `ORDER BY id`

2. **rag-orchestrator/routers/business_types_config.py**
   - Line 71: Business types config - æ”¹ç”¨ `ORDER BY id`

**å„ªé»**:
- è‡ªå‹•æŒ‰ç…§å»ºç«‹é †åºæ’åˆ—
- ä¸éœ€è¦æ‰‹å‹•ç¶­è­·æ’åºæ•¸å­—
- æŸ¥è©¢æ•ˆç‡æ›´å¥½ï¼ˆid æ˜¯ä¸»éµï¼Œæœ‰ç´¢å¼•ï¼‰

## ğŸ“ æª”æ¡ˆè®Šæ›´æ¸…å–®

### æ–°å¢æª”æ¡ˆ

```
knowledge-admin/frontend/src/views/TargetUserConfigView.vue
```

### ä¿®æ”¹æª”æ¡ˆ

```
knowledge-admin/backend/app.py
  - æ–°å¢ target_user_config CRUD API ç«¯é»
  - æ›´æ–°æ’åºé‚è¼¯ï¼ˆç§»é™¤ display_orderï¼‰

knowledge-admin/frontend/src/router.js
  - æ–°å¢ TargetUserConfigView è·¯ç”±
  - æ–°å¢ /audience-config é‡å®šå‘
  - ç§»é™¤ AudienceConfigView å¼•ç”¨

knowledge-admin/frontend/src/App.vue
  - æ›´æ–°å°èˆªé¸å–®é …ç›®
  - æ›´æ–°é é¢æ¨™é¡Œå°æ‡‰

knowledge-admin/frontend/src/views/KnowledgeView.vue
  - ç§»é™¤æ¥­æ…‹é¡å‹é¸æ“‡å™¨çš„ icon é¡¯ç¤º
  - ç§»é™¤ç›®æ¨™ç”¨æˆ¶é¸æ“‡å™¨çš„ icon é¡¯ç¤º

rag-orchestrator/routers/business_types_config.py
  - æ›´æ–°æ’åºé‚è¼¯ï¼ˆç§»é™¤ display_orderï¼‰
```

### ç§»é™¤æª”æ¡ˆ

```
knowledge-admin/frontend/src/views/AudienceConfigView.vue (é€éé‡å®šå‘è™•ç†)
```

## ğŸ—„ï¸ è³‡æ–™åº«è®Šæ›´

### æ¸…ç†è³‡æ–™

```sql
-- Target User Config
UPDATE target_user_config SET icon = NULL;

-- Business Types Config
UPDATE business_types_config SET icon = NULL;
```

### æ¬„ä½ä½¿ç”¨è®Šæ›´

- **icon**: ä¸å†ä½¿ç”¨ï¼ˆè³‡æ–™è¨­ç‚º NULLï¼‰
- **display_order**: ä¸å†ä½¿ç”¨æ–¼æ’åºï¼ˆæ”¹ç”¨ idï¼‰

**æ³¨æ„**: æ¬„ä½æœ¬èº«ä»ä¿ç•™åœ¨è³‡æ–™åº«ä¸­ï¼Œä½†ä¸å†ä½¿ç”¨ã€‚æœªä¾†å¯è€ƒæ…®ç§»é™¤é€™äº›æ¬„ä½ã€‚

## ğŸ¨ UI/UX æ”¹é€²

### 1. TargetUserConfigView ä»‹é¢è¨­è¨ˆ

**è³‡è¨Šæç¤ºæ¡†**:
```
ğŸ“ èªªæ˜ï¼š
- ç›®æ¨™ç”¨æˆ¶ç”¨æ–¼å®šç¾©çŸ¥è­˜åº«é‡å°çš„ç”¨æˆ¶é¡å‹ï¼ˆå¦‚ï¼šç§Ÿå®¢ã€æˆ¿æ±ã€ç‰©æ¥­ç®¡ç†å¸«ï¼‰
- æ¯ç­†çŸ¥è­˜å¯ä»¥é¸æ“‡ä¸€ç¨®æˆ–å¤šç¨®ç›®æ¨™ç”¨æˆ¶
- æœªæŒ‡å®šç›®æ¨™ç”¨æˆ¶çš„çŸ¥è­˜è¦–ç‚ºã€Œé€šç”¨çŸ¥è­˜ã€ï¼Œå°æ‰€æœ‰ç”¨æˆ¶å¯è¦‹
- âš ï¸ åœç”¨ç›®æ¨™ç”¨æˆ¶å‰ï¼Œè«‹ç¢ºèªç›¸é—œçŸ¥è­˜çš„å¯è¦‹æ€§è¨­å®š
```

**è­¦å‘Šæç¤ºæ¡†**:
```
âš ï¸ ç›®å‰æ­¤åŠŸèƒ½å°šæœªç”Ÿæ•ˆ

ç”±æ–¼ç³»çµ±ç¼ºå°‘ç”¨æˆ¶ç™»å…¥æ©Ÿåˆ¶ï¼Œç„¡æ³•è­˜åˆ¥ç”¨æˆ¶èº«ä»½ï¼ˆtenant/landlord/property_manager ç­‰ï¼‰ï¼Œ
å› æ­¤ target_user éæ¿¾åŠŸèƒ½æš«æ™‚ç„¡ä½œç”¨ã€‚

ç•¶å‰æ‰€æœ‰ç”¨æˆ¶éƒ½èƒ½çœ‹åˆ°æ‰€æœ‰çŸ¥è­˜ï¼Œä¸å— target_user è¨­å®šé™åˆ¶ã€‚

å¾…æ•´åˆï¼šç•¶æ‚¨çš„æ‡‰ç”¨ç³»çµ±æ¥å…¥ä¸¦åœ¨èŠå¤©è«‹æ±‚ä¸­å‚³å…¥æ­£ç¢ºçš„ user_role åƒæ•¸æ™‚ï¼Œæ­¤åŠŸèƒ½å°‡è‡ªå‹•ç”Ÿæ•ˆã€‚
```

**è¡¨å–®æ¬„ä½** (ç°¡åŒ–è¨­è¨ˆ):
1. **ç”¨æˆ¶å€¼** (user_value)
   - å¿…å¡«
   - åªèƒ½ä½¿ç”¨å°å¯«è‹±æ–‡å­—æ¯å’Œåº•ç·š
   - å»ºç«‹å¾Œä¸å¯ä¿®æ”¹
   - ç”¨æ–¼ `knowledge_base.target_user` é™£åˆ—

2. **é¡¯ç¤ºåç¨±** (display_name)
   - å¿…å¡«
   - åœ¨å‰ç«¯é¡¯ç¤ºçš„åç¨±
   - å¯ä»¥æ˜¯ä¸­æ–‡

3. **èªªæ˜** (description)
   - é¸å¡«
   - æè¿°æ­¤ç›®æ¨™ç”¨æˆ¶çš„ç‰¹å¾µå’Œç”¨é€”

### 2. KnowledgeView é¸æ“‡å™¨ç°¡åŒ–

**ä¹‹å‰**:
```vue
<span v-if="btype.icon" class="tag-icon">{{ btype.icon }}</span>
{{ btype.display_name }}
```

**ä¹‹å¾Œ**:
```vue
{{ btype.display_name }}
```

## ğŸ”§ æŠ€è¡“å¯¦ä½œç´°ç¯€

### API è¨­è¨ˆæ¨¡å¼

æ¡ç”¨ RESTful API è¨­è¨ˆï¼š

```python
# Pydantic æ¨¡å‹
class TargetUserConfigCreate(BaseModel):
    user_value: str
    display_name: str
    description: Optional[str] = None

class TargetUserConfigUpdate(BaseModel):
    display_name: str
    description: Optional[str] = None
    is_active: Optional[bool] = None
```

### è»Ÿåˆªé™¤æ¨¡å¼

ä½¿ç”¨ `is_active` æ¨™è¨˜è€Œéç¡¬åˆªé™¤ï¼š

```python
# åœç”¨ï¼ˆè»Ÿåˆªé™¤ï¼‰
DELETE /api/target-users-config/{user_value}
â†’ UPDATE target_user_config SET is_active = FALSE

# å•Ÿç”¨
PUT /api/target-users-config/{user_value}
â†’ UPDATE target_user_config SET is_active = TRUE
```

### å‰ç«¯ç‹€æ…‹ç®¡ç†

```vue
<script>
export default {
  data() {
    return {
      targetUsersList: [],
      loading: false,
      showModal: false,
      editingItem: null,
      saving: false,
      formData: {
        user_value: '',
        display_name: '',
        description: ''
      }
    };
  }
}
</script>
```

## ğŸ“Š Target User åŠŸèƒ½èªªæ˜

### é‹ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ç®¡ç†å“¡åœ¨ã€Œç›®æ¨™ç”¨æˆ¶ç®¡ç†é é¢ã€é…ç½®                           â”‚
â”‚    http://localhost:8087/target-users-config                 â”‚
â”‚                                                              â”‚
â”‚    å®šç¾©ç³»çµ±æ”¯æ´çš„ç”¨æˆ¶é¡å‹ï¼š                                   â”‚
â”‚    â€¢ tenant (ç§Ÿå®¢)                                           â”‚
â”‚    â€¢ landlord (æˆ¿æ±)                                         â”‚
â”‚    â€¢ property_manager (ç‰©æ¥­ç®¡ç†å¸«)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ç®¡ç†å“¡åœ¨ã€ŒçŸ¥è­˜åº«ç®¡ç†ã€æ–°å¢çŸ¥è­˜                             â”‚
â”‚    http://localhost:8087/knowledge                           â”‚
â”‚                                                              â”‚
â”‚    çŸ¥è­˜ Aï¼šã€Œç§Ÿé‡‘é€¾æœŸå¦‚ä½•è™•ç†ï¼Ÿã€                             â”‚
â”‚    ç›®æ¨™ç”¨æˆ¶ï¼šâ˜‘ ç§Ÿå®¢  â˜‘ ç‰©æ¥­ç®¡ç†å¸«                            â”‚
â”‚    â†’ knowledge_base.target_user = ['tenant', 'property_manager']
â”‚                                                              â”‚
â”‚    çŸ¥è­˜ Bï¼šã€Œå¦‚ä½•å‚¬ç¹³ç§Ÿé‡‘ï¼Ÿã€                                 â”‚
â”‚    ç›®æ¨™ç”¨æˆ¶ï¼šâ˜‘ æˆ¿æ±  â˜‘ ç‰©æ¥­ç®¡ç†å¸«                            â”‚
â”‚    â†’ knowledge_base.target_user = ['landlord', 'property_manager']
â”‚                                                              â”‚
â”‚    çŸ¥è­˜ Cï¼šã€Œç§Ÿé‡‘ç¹³è²»æ–¹å¼ã€                                   â”‚
â”‚    ç›®æ¨™ç”¨æˆ¶ï¼šæœªé¸æ“‡ï¼ˆé€šç”¨çŸ¥è­˜ï¼‰                               â”‚
â”‚    â†’ knowledge_base.target_user = NULL                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ç”¨æˆ¶æå•æ™‚ï¼Œç³»çµ±å‚³å…¥ user_role åƒæ•¸                       â”‚
â”‚                                                              â”‚
â”‚    ç§Ÿå®¢æå•ï¼šã€Œç§Ÿé‡‘é€¾æœŸæ€éº¼è¾¦ï¼Ÿã€                             â”‚
â”‚    â†’ user_role = 'tenant'                                    â”‚
â”‚    â†’ RAG éæ¿¾ï¼štarget_user IS NULL OR 'tenant' = ANY(target_user)
â”‚    â†’ âœ… è¿”å›çŸ¥è­˜ Aã€Cï¼ˆä¸è¿”å›çŸ¥è­˜ Bï¼‰                        â”‚
â”‚                                                              â”‚
â”‚    æˆ¿æ±æå•ï¼šã€Œç§Ÿé‡‘é€¾æœŸæ€éº¼è¾¦ï¼Ÿã€                             â”‚
â”‚    â†’ user_role = 'landlord'                                  â”‚
â”‚    â†’ RAG éæ¿¾ï¼štarget_user IS NULL OR 'landlord' = ANY(target_user)
â”‚    â†’ âœ… è¿”å›çŸ¥è­˜ Bã€Cï¼ˆä¸è¿”å›çŸ¥è­˜ Aï¼‰                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è³‡æ–™è¡¨é—œä¿‚

**target_user_config è¡¨** (é…ç½®è¡¨):
- ä½œç”¨ï¼šå®šç¾©ã€Œç³»çµ±æ”¯æ´å“ªäº›ç”¨æˆ¶é¡å‹é¸é …ã€
- é¡æ¯”ï¼šå»ºç«‹ã€Œä¸‹æ‹‰é¸å–®çš„é¸é …ã€

**knowledge_base.target_user æ¬„ä½** (PostgreSQL ARRAY):
- ä½œç”¨ï¼šæ¯æ¢çŸ¥è­˜å¯ä»¥æŒ‡å®šã€Œé©ç”¨æ–¼å“ªäº›ç”¨æˆ¶é¡å‹ã€
- é¡æ¯”ï¼šã€Œé€™æ¢çŸ¥è­˜çµ¦èª°çœ‹ã€

**èŠå¤©è«‹æ±‚çš„ user_role åƒæ•¸**:
- ä½œç”¨ï¼šè¡¨ç¤ºã€Œç•¶å‰ç”¨æˆ¶çš„èº«ä»½ã€
- é¡æ¯”ï¼šã€Œæˆ‘æ˜¯èª°ã€

## âš ï¸ å·²çŸ¥é™åˆ¶

### 1. åŠŸèƒ½å°šæœªç”Ÿæ•ˆ

**åŸå› **: ç³»çµ±ç¼ºå°‘ç”¨æˆ¶ç™»å…¥æ©Ÿåˆ¶

**å½±éŸ¿**:
- ç„¡æ³•è­˜åˆ¥ç”¨æˆ¶èº«ä»½ï¼ˆtenant/landlord/property_manager ç­‰ï¼‰
- `target_user` éæ¿¾åŠŸèƒ½æš«æ™‚ç„¡ä½œç”¨
- ç•¶å‰æ‰€æœ‰ç”¨æˆ¶éƒ½èƒ½çœ‹åˆ°æ‰€æœ‰çŸ¥è­˜ï¼Œä¸å— target_user è¨­å®šé™åˆ¶

**è§£æ±ºæ–¹æ¡ˆ**:
- ç•¶æ‡‰ç”¨ç³»çµ±æ¥å…¥ä¸¦åœ¨èŠå¤©è«‹æ±‚ä¸­å‚³å…¥æ­£ç¢ºçš„ `user_role` åƒæ•¸æ™‚ï¼Œæ­¤åŠŸèƒ½å°‡è‡ªå‹•ç”Ÿæ•ˆ
- å¾Œç«¯ RAG æª¢ç´¢é‚è¼¯å·²å®Œæˆï¼Œåªéœ€å‰ç«¯æ•´åˆç”¨æˆ¶èªè­‰ç³»çµ±

### 2. æ¬„ä½ä¿ç•™

**ä¿ç•™çš„æ¬„ä½**:
- `icon` - å·²è¨­ç‚º NULLï¼Œä½†æ¬„ä½ä»å­˜åœ¨
- `display_order` - å·²ä¸å†ä½¿ç”¨ï¼Œä½†æ¬„ä½ä»å­˜åœ¨

**åŸå› **:
- é¿å…å¤§è¦æ¨¡è³‡æ–™åº« schema è®Šæ›´
- ä¿ç•™å½ˆæ€§ï¼Œæœªä¾†å¯èƒ½é‡æ–°ä½¿ç”¨

**æœªä¾†è€ƒæ…®**:
- å¯ä»¥å»ºç«‹ migration è…³æœ¬ç§»é™¤é€™äº›æ¬„ä½
- æˆ–ä¿æŒç¾ç‹€ï¼Œåƒ…åœ¨æ‡‰ç”¨å±¤é¢ä¸ä½¿ç”¨

## ğŸ§ª æ¸¬è©¦å»ºè­°

### 1. åŠŸèƒ½æ¸¬è©¦

```bash
# 1. æ¸¬è©¦ Target User Config CRUD
curl http://localhost:5001/api/target-users-config

# 2. æ¸¬è©¦æ–°å¢ç›®æ¨™ç”¨æˆ¶
curl -X POST http://localhost:5001/api/target-users-config \
  -H "Content-Type: application/json" \
  -d '{
    "user_value": "test_user",
    "display_name": "æ¸¬è©¦ç”¨æˆ¶",
    "description": "æ¸¬è©¦ç”¨"
  }'

# 3. æ¸¬è©¦æ›´æ–°ç›®æ¨™ç”¨æˆ¶
curl -X PUT http://localhost:5001/api/target-users-config/test_user \
  -H "Content-Type: application/json" \
  -d '{
    "display_name": "æ¸¬è©¦ç”¨æˆ¶ (å·²æ›´æ–°)",
    "description": "æ›´æ–°å¾Œçš„æè¿°"
  }'

# 4. æ¸¬è©¦åœç”¨ç›®æ¨™ç”¨æˆ¶
curl -X DELETE http://localhost:5001/api/target-users-config/test_user
```

### 2. UI æ¸¬è©¦

1. **ç®¡ç†é é¢æ¸¬è©¦**:
   - è¨ªå• `http://localhost:8087/target-users-config`
   - ç¢ºèªåˆ—è¡¨æ­£ç¢ºé¡¯ç¤º
   - æ¸¬è©¦æ–°å¢ã€ç·¨è¼¯ã€å•Ÿç”¨ã€åœç”¨åŠŸèƒ½
   - ç¢ºèªè­¦å‘Šæç¤ºæ¡†æ­£ç¢ºé¡¯ç¤º

2. **çŸ¥è­˜åº«ç·¨è¼¯æ¸¬è©¦**:
   - è¨ªå• `http://localhost:8087/knowledge`
   - ç·¨è¼¯æˆ–æ–°å¢çŸ¥è­˜
   - ç¢ºèªç›®æ¨™ç”¨æˆ¶é¸æ“‡å™¨æ­£ç¢ºé¡¯ç¤ºï¼ˆç„¡åœ–ç¤ºï¼‰
   - ç¢ºèªå¯ä»¥å¤šé¸ç›®æ¨™ç”¨æˆ¶

3. **è·¯ç”±é‡å®šå‘æ¸¬è©¦**:
   - è¨ªå• `http://localhost:8087/audience-config`
   - ç¢ºèªè‡ªå‹•é‡å®šå‘åˆ° `/target-users-config`

### 3. è³‡æ–™åº«é©—è­‰

```sql
-- é©—è­‰ icon å·²æ¸…é™¤
SELECT user_value, display_name, icon
FROM target_user_config;

SELECT type_value, display_name, icon
FROM business_types_config;

-- é©—è­‰æ’åºä½¿ç”¨ id
-- æ‡‰è©²çœ‹åˆ°è³‡æ–™æŒ‰ id é †åºæ’åˆ—ï¼Œè€Œé display_order
```

## ğŸ“š ç›¸é—œæ–‡æª”

- [Business Types Config æ¸¬è©¦å ±å‘Š](./BUSINESS_TYPE_TEST_REPORT.md)
- [å—çœ¾é¸æ“‡å™¨æ”¹é€²å ±å‘Š](./AUDIENCE_SELECTOR_IMPROVEMENT.md)
- [ç³»çµ±æ¶æ§‹æ–‡æª”](../architecture/SYSTEM_ARCHITECTURE.md)
- [æ¥­å‹™ç¯„åœèªè­‰æ¶æ§‹](../architecture/AUTH_AND_BUSINESS_SCOPE.md)

## ğŸ‰ ç¸½çµ

æœ¬æ¬¡æ›´æ–°æˆåŠŸå¯¦ä½œäº† Target User Config ç®¡ç†ç³»çµ±ï¼Œä¸¦å„ªåŒ–äº†æ•´é«”é…ç½®ç®¡ç†ä»‹é¢ï¼š

**å®Œæˆé …ç›®**:
- âœ… å‰µå»ºå®Œæ•´çš„ç›®æ¨™ç”¨æˆ¶é…ç½® CRUD ä»‹é¢
- âœ… å¾ Audience Config å¹³æ»‘é·ç§»åˆ° Target User Config
- âœ… ç§»é™¤ä¸å¿…è¦çš„ icon å’Œ display_order æ¬„ä½
- âœ… æ¸…ç†è³‡æ–™åº«ä¸­çš„å†—é¤˜è³‡æ–™
- âœ… å„ªåŒ–æ’åºæ©Ÿåˆ¶ï¼Œä½¿ç”¨ id æ’åº
- âœ… æ›´æ–°æ‰€æœ‰ç›¸é—œ API ç«¯é»
- âœ… æ·»åŠ æ¸…æ™°çš„ä½¿ç”¨èªªæ˜å’Œè­¦å‘Šæç¤º

**ç³»çµ±æ”¹é€²**:
- ä»‹é¢æ›´ç°¡æ½”ï¼Œæ˜“æ–¼ç¶­è­·
- æ’åºé‚è¼¯æ›´é«˜æ•ˆ
- ç¨‹å¼ç¢¼æ›´æ¸…æ™°ï¼Œæ¸›å°‘æŠ€è¡“å‚µ
- ç‚ºæœªä¾†ç”¨æˆ¶èªè­‰æ•´åˆåšå¥½æº–å‚™

**ä¸‹ä¸€æ­¥**:
- æ•´åˆç”¨æˆ¶ç™»å…¥/èªè­‰ç³»çµ±
- å¯¦ä½œ user_role åƒæ•¸å‚³éæ©Ÿåˆ¶
- æ¸¬è©¦ target_user éæ¿¾åŠŸèƒ½
- è€ƒæ…®ç§»é™¤è³‡æ–™åº«ä¸­ä¸å†ä½¿ç”¨çš„æ¬„ä½
