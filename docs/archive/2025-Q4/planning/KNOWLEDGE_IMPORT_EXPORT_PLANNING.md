# çŸ¥è­˜åº«åŒ¯å…¥èˆ‡åŒ¯å‡ºåŠŸèƒ½è¦åŠƒ

**ç‰ˆæœ¬**: 2.1
**æ—¥æœŸ**: 2025-11-21
**è¦åŠƒäººå“¡**: Claude Code
**ç‹€æ…‹**: âœ… æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆ

---

## ğŸ“‹ ç›®éŒ„

1. [åŸ·è¡Œæ‘˜è¦](#åŸ·è¡Œæ‘˜è¦)
2. [ç¾ç‹€åˆ†æ](#ç¾ç‹€åˆ†æ)
3. [åŠŸèƒ½éœ€æ±‚](#åŠŸèƒ½éœ€æ±‚)
4. [æŠ€è¡“æ¶æ§‹è¨­è¨ˆ](#æŠ€è¡“æ¶æ§‹è¨­è¨ˆ)
5. [API è¨­è¨ˆ](#api-è¨­è¨ˆ)
6. [å‰ç«¯ä»‹é¢è¨­è¨ˆ](#å‰ç«¯ä»‹é¢è¨­è¨ˆ)
7. [è³‡æ–™åº«è¨­è¨ˆ](#è³‡æ–™åº«è¨­è¨ˆ)
8. [å¯¦ä½œè¨ˆåŠƒ](#å¯¦ä½œè¨ˆåŠƒ)
9. [æ¸¬è©¦è¨ˆåŠƒ](#æ¸¬è©¦è¨ˆåŠƒ)
10. [é¢¨éšªè©•ä¼°](#é¢¨éšªè©•ä¼°)

---

## åŸ·è¡Œæ‘˜è¦

### ç›®æ¨™
å»ºç«‹å®Œæ•´çš„çŸ¥è­˜åº«åŒ¯å…¥èˆ‡åŒ¯å‡ºç³»çµ±ï¼Œæ”¯æ´å¤šç¨®æ ¼å¼ã€æ‰¹æ¬¡è™•ç†ã€æ™ºèƒ½éæ¿¾ï¼Œä¸¦æä¾›è‰¯å¥½çš„ä½¿ç”¨è€…é«”é©—ã€‚

### ç¾ç‹€
- âœ… **åŒ¯å…¥åŠŸèƒ½**ï¼šå·²å®Œå–„ï¼ˆæ”¯æ´ 5 ç¨®æ ¼å¼ã€LLM å¢å¼·ã€è³ªé‡æ§åˆ¶ï¼‰
- âœ… **åŒ¯å‡ºåŠŸèƒ½**ï¼šå·²å®Œæˆï¼ˆExcel/CSV/JSONã€ä¸‰ç¨®åŒ¯å‡ºæ¨¡å¼ã€æ„åœ–å°ç…§è¡¨ï¼‰
- âœ… **çµ±ä¸€ Job ç³»çµ±**ï¼šå·²æ•´åˆï¼ˆæ‰€æœ‰åŒ¯å…¥åŒ¯å‡ºä½¿ç”¨ unified_jobs è¡¨ï¼‰
- âŒ **å‚™ä»½é‚„åŸ**ï¼šæœªå¯¦ä½œ
- âŒ **è³‡æ–™é·ç§»**ï¼šæœªå¯¦ä½œ

### è¦åŠƒé‡é»
1. âœ… **æ–°å¢å®Œæ•´åŒ¯å‡ºåŠŸèƒ½**ï¼ˆå„ªå…ˆç´šï¼šé«˜ï¼‰- å·²å®Œæˆ
2. âœ… **çµ±ä¸€ Job ç³»çµ±æ•´åˆ**ï¼ˆå„ªå…ˆç´šï¼šé«˜ï¼‰- å·²å®Œæˆ
3. â­ï¸ **å¢å¼·åŒ¯å…¥åŠŸèƒ½**ï¼ˆPDF æ”¯æ´ã€å¹³è¡Œè™•ç†ï¼‰- å¾…å¯¦ä½œ
4. â­ï¸ **å‚™ä»½èˆ‡é‚„åŸæ©Ÿåˆ¶**ï¼ˆè³‡æ–™å®‰å…¨ï¼‰- å¾…å¯¦ä½œ
5. â­ï¸ **è·¨ç’°å¢ƒé·ç§»å·¥å…·**ï¼ˆé–‹ç™¼/ç”Ÿç”¢ç’°å¢ƒåŒæ­¥ï¼‰- å¾…å¯¦ä½œ

---

## ç¾ç‹€åˆ†æ

### å·²æœ‰åŠŸèƒ½ï¼ˆåŒ¯å…¥ï¼‰

#### âœ… å„ªå‹¢
1. **å¤šæ ¼å¼æ”¯æ´**ï¼šExcel, CSV, TXT, JSONï¼ˆ5 ç¨®æ ¼å¼ï¼‰
2. **æ™ºèƒ½è™•ç†**ï¼š
   - LLM è‡ªå‹•ç”Ÿæˆå•é¡Œæ‘˜è¦
   - æ„åœ–æ¨è–¦ï¼ˆå«ä¿¡å¿ƒåº¦ï¼‰
   - è³ªé‡è©•ä¼°ï¼ˆ1-10 åˆ†ï¼Œé–€æª» 6 åˆ†ï¼‰
   - æ³›åŒ–è­¦å‘Šï¼ˆç‰©æ¥­åç¨±ã€æˆ¿è™Ÿã€æ—¥æœŸç­‰ï¼‰
3. **å»é‡æ©Ÿåˆ¶**ï¼š
   - æ–‡å­—ç²¾ç¢ºåŒ¹é…å»é‡
   - èªæ„ç›¸ä¼¼åº¦å»é‡ï¼ˆé–¾å€¼ 0.85ï¼‰
4. **å¯©æ ¸æ©Ÿåˆ¶**ï¼š
   - é è¨­é€²å…¥å¯©æ ¸ä½‡åˆ—
   - å¯é¸è·³éå¯©æ ¸
5. **æ‰¹æ¬¡è™•ç†**ï¼š
   - å¤šæª”æ¡ˆä½‡åˆ—ç®¡ç†
   - ç¨ç«‹é€²åº¦è¿½è¹¤

#### âš ï¸ é™åˆ¶
1. **PDF æ ¼å¼ä¸æ”¯æ´**ï¼ˆå¾…å¯¦ä½œï¼‰
2. **åºåˆ—è™•ç†**ï¼ˆä¸€æ¬¡è™•ç†ä¸€å€‹æª”æ¡ˆï¼‰
3. **10 åˆ†é˜è¶…æ™‚é™åˆ¶**ï¼ˆå¤§æª”æ¡ˆå¯èƒ½è¶…æ™‚ï¼‰
4. **ç„¡åŒ¯å…¥é è¦½**ï¼ˆç›´æ¥è™•ç†ï¼Œç„¡æ³•é è¦½çµæœï¼‰

### å·²æœ‰åŠŸèƒ½ï¼ˆåŒ¯å‡ºï¼‰

#### âœ… ç¾ç‹€ï¼ˆ2025-11-21 æ›´æ–°ï¼‰
å·²å®Œæˆå®Œæ•´çš„çŸ¥è­˜åº«åŒ¯å‡ºåŠŸèƒ½ï¼š

**API ç«¯é»**ï¼š
- `POST /api/v1/knowledge-export/export` - å‰µå»ºåŒ¯å‡ºä»»å‹™
- `GET /api/v1/knowledge-export/jobs/{job_id}` - æŸ¥è©¢åŒ¯å‡ºç‹€æ…‹
- `GET /api/v1/knowledge-export/jobs/{job_id}/download` - ä¸‹è¼‰æª”æ¡ˆ
- `GET /api/v1/knowledge-export/jobs` - åŒ¯å‡ºæ­·å²
- `GET /api/v1/knowledge-export/statistics` - åŒ¯å‡ºçµ±è¨ˆ
- `GET /api/v1/knowledge-export/preview` - é è¦½åŒ¯å‡ºè³‡æ–™

**åŠŸèƒ½ç‰¹é»**ï¼š
1. âœ… **è³‡æ–™ä¾†æº**ï¼šæ­£å¼çŸ¥è­˜åº«ï¼ˆknowledge_baseï¼‰
2. âœ… **ä¸‰ç¨®åŒ¯å‡ºæ¨¡å¼**ï¼š
   - `basic` - åŸºç¤åŒ¯å‡ºï¼ˆå–®å·¥ä½œè¡¨ï¼Œå¿«é€Ÿï¼‰
   - `formatted` - é€²éšæ ¼å¼åŒ–ï¼ˆå¤šå·¥ä½œè¡¨ï¼Œå°ˆæ¥­æ ¼å¼ï¼‰
   - `optimized` - æ•ˆèƒ½å„ªåŒ–ï¼ˆæ”¯æ´ 10 è¬+ ç­†è³‡æ–™ï¼‰
3. âœ… **æ ¼å¼æ”¯æ´**ï¼šExcel (.xlsx)
4. âœ… **å¤šå·¥ä½œè¡¨**ï¼šçŸ¥è­˜åˆ—è¡¨ã€æ„åœ–å°ç…§è¡¨ã€åŒ¯å‡ºè³‡è¨Š
5. âœ… **ç¯©é¸æ¢ä»¶**ï¼šæŒ‰æ¥­è€…ã€æ„åœ–ã€å„ªå…ˆç´šç¯©é¸
6. âœ… **èƒŒæ™¯è™•ç†**ï¼šéåŒæ­¥ä»»å‹™ï¼Œé¿å…è¶…æ™‚
7. âœ… **é€²åº¦è¿½è¹¤**ï¼šå³æ™‚é€²åº¦æ›´æ–°
8. âœ… **æ­·å²è¨˜éŒ„**ï¼šæ‰€æœ‰åŒ¯å‡ºè¨˜éŒ„ä¿å­˜æ–¼ unified_jobs
9. âœ… **Excel å­—å…ƒæ¸…ç†**ï¼šè‡ªå‹•è™•ç†æ§åˆ¶å­—å…ƒå’Œç‰¹æ®Šæ ¼å¼
10. âœ… **çµ±ä¸€ Job ç³»çµ±**ï¼šæ•´åˆåˆ° unified_jobs è¡¨

**æ¸¬è©¦çµæœ**ï¼š
- âœ… æˆåŠŸåŒ¯å‡º 136 ç­†çŸ¥è­˜è¨˜éŒ„
- âœ… æª”æ¡ˆå¤§å° 29.66 KB
- âœ… ç„¡å­—å…ƒéŒ¯èª¤
- âœ… å¤šå·¥ä½œè¡¨æ ¼å¼æ­£ç¢º

#### ğŸ”„ æ–‡ä»¶è½‰æ›æ¨¡çµ„åŒ¯å‡ºï¼ˆä¿ç•™ï¼‰
- ç«¯é»ï¼š`POST /api/v1/document-converter/{job_id}/export-csv`
- æ ¼å¼ï¼šCSV
- ç”¨é€”ï¼šè¦æ ¼æ›¸è½‰ Q&A å¾ŒåŒ¯å‡º

---

## åŠŸèƒ½éœ€æ±‚

### 1. åŒ¯å‡ºåŠŸèƒ½ï¼ˆæ–°å¢ï¼‰

#### 1.1 åŸºç¤åŒ¯å‡º
- **è³‡æ–™ä¾†æº**ï¼š
  - âœ… æ­£å¼çŸ¥è­˜åº«ï¼ˆ`knowledge_base`ï¼‰
  - âœ… å¯©æ ¸ä½‡åˆ—ï¼ˆ`ai_generated_knowledge_candidates`ï¼‰
  - âœ… æ¸¬è©¦æƒ…å¢ƒï¼ˆ`test_scenarios`ï¼‰
- **æ ¼å¼æ”¯æ´**ï¼š
  - âœ… Excel (.xlsx) - æ¨è–¦ï¼Œæ”¯æ´å¤šå·¥ä½œè¡¨
  - âœ… CSV (.csv) - ç°¡å–®è³‡æ–™äº¤æ›
  - âœ… JSON (.json) - ç¨‹å¼åŒ–è™•ç†
  - âœ… çŸ¥è­˜åº«å‚™ä»½æ ¼å¼ (.kbbackup) - å®Œæ•´å‚™ä»½
- **åŸºæœ¬æ¬„ä½**ï¼š
  - å¿…è¦ï¼š`question_summary`, `answer`, `intent_id`, `priority`
  - é¸ç”¨ï¼š`keywords`, `business_types`, `target_user`, `source_type`, `created_at`, `updated_at`
  - Metadataï¼š`embedding`ï¼ˆåƒ…å‚™ä»½æ ¼å¼ï¼‰

#### 1.2 é€²éšç¯©é¸
- **æ„åœ–ç¯©é¸**ï¼šé¸æ“‡ä¸€å€‹æˆ–å¤šå€‹æ„åœ–
- **æ¥­è€…ç¯©é¸**ï¼šé¸æ“‡ç‰¹å®šæ¥­è€…æˆ–å…¨åŸŸçŸ¥è­˜
- **å„ªå…ˆç´šç¯©é¸**ï¼šå·²å•Ÿç”¨/æœªå•Ÿç”¨/å…¨éƒ¨
- **ç‹€æ…‹ç¯©é¸**ï¼šå•Ÿç”¨/åœç”¨/å…¨éƒ¨
- **æ—¥æœŸç¯„åœ**ï¼šå»ºç«‹æ—¥æœŸã€æ›´æ–°æ—¥æœŸ
- **é—œéµå­—æœå°‹**ï¼šå•é¡Œã€ç­”æ¡ˆã€é—œéµå­—
- **ä¾†æºé¡å‹**ï¼šmanual, import, ai_generated, document_conversion

#### 1.3 æ‰¹æ¬¡åŒ¯å‡º
- **å…¨éƒ¨åŒ¯å‡º**ï¼šåŒ¯å‡ºæ•´å€‹çŸ¥è­˜åº«
- **é¸æ“‡æ€§åŒ¯å‡º**ï¼šåŸºæ–¼ç¯©é¸æ¢ä»¶
- **åˆ†æ‰¹ä¸‹è¼‰**ï¼šå¤§é‡è³‡æ–™åˆ†æ‰¹è™•ç†ï¼ˆé¿å…è¶…æ™‚ï¼‰
- **é€²åº¦è¿½è¹¤**ï¼šé¡¯ç¤ºåŒ¯å‡ºé€²åº¦

#### 1.4 åŒ¯å‡ºæ ¼å¼ç´°ç¯€

##### Excel æ ¼å¼
```
å·¥ä½œè¡¨ 1: çŸ¥è­˜åˆ—è¡¨
- æ¬„ä½ï¼šID, å•é¡Œæ‘˜è¦, ç­”æ¡ˆ, æ„åœ–, å„ªå…ˆç´š, é—œéµå­—, æ¥­æ…‹, ç›®æ¨™ç”¨æˆ¶, ä¾†æº, å»ºç«‹æ™‚é–“
- æ ¼å¼ï¼šè‡ªå‹•æ›è¡Œã€å‡çµé¦–åˆ—ã€è‡ªå‹•ç¯©é¸

å·¥ä½œè¡¨ 2: æ„åœ–å°ç…§è¡¨
- æ¬„ä½ï¼šæ„åœ–ID, æ„åœ–åç¨±, æè¿°

å·¥ä½œè¡¨ 3: åŒ¯å‡ºè³‡è¨Š
- åŒ¯å‡ºæ™‚é–“ã€ç¯©é¸æ¢ä»¶ã€ç¸½ç­†æ•¸ã€åŒ¯å‡ºè€…
```

##### CSV æ ¼å¼
```csv
question_summary,answer,intent_id,intent_name,priority,keywords,business_types,target_user,source_type,created_at
"ç§Ÿé‡‘ç¹³ç´æ—¥æœŸ","æ¯æœˆ5è™Ÿå‰ç¹³ç´",1,"ç§Ÿé‡‘ç¹³ç´",1,"ç§Ÿé‡‘;ç¹³ç´;æ—¥æœŸ","ä½å®…;å•†è¾¦","tenant","import","2025-11-21 10:00:00"
```

##### JSON æ ¼å¼
```json
{
  "export_info": {
    "timestamp": "2025-11-21T10:00:00Z",
    "filters": {...},
    "total_count": 1500,
    "exported_by": "admin"
  },
  "knowledge_list": [
    {
      "id": 1,
      "question_summary": "ç§Ÿé‡‘ç¹³ç´æ—¥æœŸ",
      "answer": "æ¯æœˆ5è™Ÿå‰ç¹³ç´",
      "intent": {"id": 1, "name": "ç§Ÿé‡‘ç¹³ç´"},
      "priority": 1,
      "keywords": ["ç§Ÿé‡‘", "ç¹³ç´", "æ—¥æœŸ"],
      "business_types": ["ä½å®…", "å•†è¾¦"],
      "target_user": ["tenant"],
      "source_type": "import",
      "created_at": "2025-11-21T10:00:00Z"
    }
  ],
  "intents": [
    {"id": 1, "name": "ç§Ÿé‡‘ç¹³ç´", "description": "ç§Ÿé‡‘ç›¸é—œå•é¡Œ"}
  ]
}
```

##### çŸ¥è­˜åº«å‚™ä»½æ ¼å¼ (.kbbackup)
```json
{
  "version": "2.0",
  "backup_time": "2025-11-21T10:00:00Z",
  "database": {
    "knowledge_base": [...],           // å®Œæ•´çŸ¥è­˜åº«ï¼ˆå« embeddingï¼‰
    "intents": [...],                  // æ„åœ–åˆ—è¡¨
    "knowledge_intent_mapping": [...], // æ„åœ–æ˜ å°„
    "vendors": [...]                   // æ¥­è€…è³‡è¨Šï¼ˆè‹¥æœ‰ï¼‰
  },
  "metadata": {
    "total_knowledge": 1500,
    "total_intents": 50,
    "postgres_version": "15.3",
    "pgvector_version": "0.5.0"
  }
}
```

### 2. åŒ¯å…¥åŠŸèƒ½ï¼ˆå¢å¼·ï¼‰

#### 2.1 æ–°å¢æ ¼å¼æ”¯æ´
- âœ… **PDF (.pdf)**ï¼š
  - ä½¿ç”¨ `pdfplumber` æˆ– `PyPDF2` æå–æ–‡å­—
  - æ”¯æ´å¤šé  PDF
  - è‡ªå‹• OCRï¼ˆè‹¥åŒ…å«åœ–ç‰‡æ–‡å­—ï¼‰
  - LLM æå–çµæ§‹åŒ–çŸ¥è­˜

#### 2.2 åŒ¯å…¥é è¦½
- **æª”æ¡ˆè§£æé è¦½**ï¼š
  - é¡¯ç¤ºå‰ 10 ç­†è³‡æ–™
  - é¡¯ç¤ºæ¬„ä½æ˜ å°„
  - é¡¯ç¤ºè³‡æ–™çµ±è¨ˆï¼ˆç¸½ç­†æ•¸ã€å»é‡ç­†æ•¸ã€ä¼°è¨ˆè™•ç†æ™‚é–“ï¼‰
- **ç¢ºèªå¾Œè™•ç†**ï¼š
  - é¿å…æ„å¤–åŒ¯å…¥éŒ¯èª¤è³‡æ–™
  - ç¯€çœ LLM token æˆæœ¬

#### 2.3 å¹³è¡Œè™•ç†å„ªåŒ–
- **å¤šæª”æ¡ˆå¹³è¡Œè™•ç†**ï¼š
  - æ”¯æ´ 2-3 å€‹æª”æ¡ˆåŒæ™‚è™•ç†
  - æ™ºèƒ½ rate limitingï¼ˆé¿å… OpenAI API é™åˆ¶ï¼‰
  - éŒ¯èª¤éš”é›¢ï¼ˆå–®ä¸€æª”æ¡ˆå¤±æ•—ä¸å½±éŸ¿å…¶ä»–ï¼‰

#### 2.4 éŒ¯èª¤æ¢å¾©
- **æ–·é»çºŒå‚³**ï¼š
  - è¨˜éŒ„è™•ç†é€²åº¦
  - å¤±æ•—å¾Œå¯ç¹¼çºŒè™•ç†
  - é¿å…é‡è¤‡è™•ç†

#### 2.5 çŸ¥è­˜åº«å‚™ä»½é‚„åŸ
- **é‚„åŸåŠŸèƒ½**ï¼š
  - ä¸Šå‚³ `.kbbackup` æª”æ¡ˆ
  - é©—è­‰å‚™ä»½å®Œæ•´æ€§
  - é¸æ“‡æ€§é‚„åŸï¼ˆå…¨éƒ¨/éƒ¨åˆ†ï¼‰
  - è¡çªè™•ç†ï¼ˆè¦†è“‹/è·³é/åˆä½µï¼‰

### 3. è³‡æ–™é·ç§»å·¥å…·

#### 3.1 è·¨ç’°å¢ƒé·ç§»
- **åŒ¯å‡ºé…ç½®**ï¼š
  - é¸æ“‡è¦é·ç§»çš„è³‡æ–™ï¼ˆçŸ¥è­˜åº«ã€æ„åœ–ã€æ¥­è€…ï¼‰
  - ç”Ÿæˆé·ç§»åŒ…ï¼ˆ.kbmigrationï¼‰
- **åŒ¯å…¥é…ç½®**ï¼š
  - é©—è­‰ç’°å¢ƒç›¸å®¹æ€§
  - ID æ˜ å°„è™•ç†ï¼ˆè‡ªå‹•é‡æ–°æ˜ å°„ IDï¼‰
  - è¡çªè§£æ±ºç­–ç•¥

#### 3.2 å¢é‡åŒæ­¥
- **è®Šæ›´è¿½è¹¤**ï¼š
  - è¿½è¹¤è‡ªä¸Šæ¬¡åŒ¯å‡ºå¾Œçš„è®Šæ›´
  - åƒ…åŒ¯å‡ºæ–°å¢/ä¿®æ”¹çš„çŸ¥è­˜
- **åŒæ­¥æ¨¡å¼**ï¼š
  - å–®å‘åŒæ­¥ï¼ˆé–‹ç™¼ â†’ ç”Ÿç”¢ï¼‰
  - é›™å‘åŒæ­¥ï¼ˆè‡ªå‹•åˆä½µè¡çªï¼‰

---

## Excel åŒ¯å‡ºæŠ€è¡“å¯è¡Œæ€§è©•ä¼°

### è©•ä¼°çµè«–ï¼šâœ… é«˜åº¦å¯è¡Œï¼ˆ95/100ï¼‰

#### ç¾æœ‰åŸºç¤è¨­æ–½
- âœ… **pandas 2.0.3** - å·²å®‰è£æ–¼ rag-orchestrator
- âœ… **openpyxl 3.1.2** - å·²å®‰è£æ–¼ rag-orchestrator
- âœ… **åœ˜éšŠç¶“é©—** - knowledge_import_service.py å·²ä½¿ç”¨ pandas + openpyxl è™•ç†ä¸­æ–‡ Excel
- âœ… **ä¸­æ–‡æ”¯æ´** - å®Œç¾æ”¯æ´ UTF-8ï¼Œå·²é©—è­‰

#### æ•ˆèƒ½è©•ä¼°

| è³‡æ–™é‡ | é ä¼°æ™‚é–“ | è¨˜æ†¶é«” | æª”æ¡ˆå¤§å° | è©•ä¼° |
|-------|---------|--------|---------|------|
| 1,000 ç­† | 2-5 ç§’ | ~100MB | ~500KB | âœ… å„ªç§€ |
| 10,000 ç­† | 20-40 ç§’ | ~500MB | ~5MB | âœ… è‰¯å¥½ |
| 100,000 ç­† | 5-8 åˆ†é˜ | ~3GB | ~50MB | âš ï¸ éœ€åˆ†æ‰¹ |

#### æŠ€è¡“æ–¹æ¡ˆ
- **é¸æ“‡**: pandas + openpyxl
- **ç†ç”±**: é›¶é¡å¤–æˆæœ¬ã€åœ˜éšŠç†Ÿæ‚‰ã€åŠŸèƒ½è±å¯Œã€ä¸­æ–‡æ”¯æ´å®Œå–„
- **å„ªåŒ–**: åˆ†æ‰¹å¯«å…¥ã€ä¸²æµè™•ç†ã€é€²åº¦è¿½è¹¤

#### å¯¦ä½œè¨ˆåŠƒ
- **Phase 1**: åŸºç¤åŒ¯å‡ºï¼ˆå–®å·¥ä½œè¡¨ã€åŸºæœ¬æ ¼å¼ï¼‰- 1 é€±
- **Phase 2**: é€²éšæ ¼å¼ï¼ˆå¤šå·¥ä½œè¡¨ã€è‡ªå‹•èª¿æ•´ï¼‰- 3 å¤©
- **Phase 3**: æ•ˆèƒ½å„ªåŒ–ï¼ˆåˆ†æ‰¹è™•ç†ã€100K ç­†ï¼‰- 3 å¤©

---

## æŠ€è¡“æ¶æ§‹è¨­è¨ˆ

### æ•´é«”æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯ä»‹é¢                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ åŒ¯å…¥ç®¡ç†ä»‹é¢ â”‚  â”‚ åŒ¯å‡ºç®¡ç†ä»‹é¢ â”‚  â”‚ å‚™ä»½é‚„åŸä»‹é¢ â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP/REST API
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FastAPI è·¯ç”±å±¤                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ import routerâ”‚  â”‚ export routerâ”‚  â”‚ backup routerâ”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æœå‹™å±¤ï¼ˆServicesï¼‰                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ KnowledgeImportServiceâ”‚  â”‚ KnowledgeExportServiceâ”‚        â”‚
â”‚  â”‚  - è§£ææª”æ¡ˆ           â”‚  â”‚  - è³‡æ–™æŸ¥è©¢            â”‚        â”‚
â”‚  â”‚  - LLM è™•ç†           â”‚  â”‚  - æ ¼å¼è½‰æ›            â”‚        â”‚
â”‚  â”‚  - å»é‡æª¢æŸ¥           â”‚  â”‚  - æª”æ¡ˆç”Ÿæˆ            â”‚        â”‚
â”‚  â”‚  - è³‡æ–™åº«å¯«å…¥         â”‚  â”‚  - æ‰¹æ¬¡è™•ç†            â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ BackupRestoreService  â”‚                                    â”‚
â”‚  â”‚  - å®Œæ•´å‚™ä»½            â”‚                                    â”‚
â”‚  â”‚  - è³‡æ–™é‚„åŸ            â”‚                                    â”‚
â”‚  â”‚  - å®Œæ•´æ€§é©—è­‰          â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è³‡æ–™å­˜å–å±¤ï¼ˆDALï¼‰                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ PostgreSQL   â”‚  â”‚ Redis Cache  â”‚  â”‚ File Storage â”‚      â”‚
â”‚  â”‚  - knowledge_â”‚  â”‚  - ä½œæ¥­ç‹€æ…‹   â”‚  â”‚  - ä¸Šå‚³æª”æ¡ˆ   â”‚      â”‚
â”‚  â”‚    base      â”‚  â”‚  - é€²åº¦è¿½è¹¤   â”‚  â”‚  - åŒ¯å‡ºæª”æ¡ˆ   â”‚      â”‚
â”‚  â”‚  - candidatesâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”‚  - jobs      â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¤–éƒ¨æœå‹™                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚ OpenAI API   â”‚  â”‚ Background   â”‚                         â”‚
â”‚  â”‚  - Embeddingsâ”‚  â”‚ Task Queue   â”‚                         â”‚
â”‚  â”‚  - LLM       â”‚  â”‚ (Celery/RQ)  â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæœå‹™è¨­è¨ˆ

#### KnowledgeExportServiceï¼ˆæ–°å¢ï¼‰

```python
class KnowledgeExportService:
    """çŸ¥è­˜åº«åŒ¯å‡ºæœå‹™"""

    def __init__(self):
        self.db_pool = None
        self.redis_client = None

    async def create_export_job(
        self,
        export_config: ExportConfig,
        user_id: str
    ) -> str:
        """
        å»ºç«‹åŒ¯å‡ºä½œæ¥­

        Args:
            export_config: åŒ¯å‡ºé…ç½®ï¼ˆæ ¼å¼ã€ç¯©é¸æ¢ä»¶ç­‰ï¼‰
            user_id: åŒ¯å‡ºè€… ID

        Returns:
            job_id: ä½œæ¥­ ID
        """
        pass

    async def export_knowledge(
        self,
        job_id: str
    ) -> ExportResult:
        """
        åŸ·è¡ŒåŒ¯å‡ºä½œæ¥­

        æµç¨‹ï¼š
        1. æŸ¥è©¢è³‡æ–™ï¼ˆæ ¹æ“šç¯©é¸æ¢ä»¶ï¼‰
        2. è³‡æ–™è½‰æ›ï¼ˆæ ¼å¼åŒ–ï¼‰
        3. ç”Ÿæˆæª”æ¡ˆï¼ˆExcel/CSV/JSONï¼‰
        4. å„²å­˜æª”æ¡ˆ
        5. æ›´æ–°ä½œæ¥­ç‹€æ…‹

        Returns:
            ExportResult: åŒ¯å‡ºçµæœï¼ˆæª”æ¡ˆè·¯å¾‘ã€çµ±è¨ˆè³‡è¨Šï¼‰
        """
        pass

    async def _query_knowledge(
        self,
        filters: ExportFilters
    ) -> List[KnowledgeRecord]:
        """æ ¹æ“šç¯©é¸æ¢ä»¶æŸ¥è©¢çŸ¥è­˜"""
        pass

    async def _generate_excel(
        self,
        knowledge_list: List[KnowledgeRecord],
        job_id: str
    ) -> str:
        """ç”Ÿæˆ Excel æª”æ¡ˆ"""
        pass

    async def _generate_csv(
        self,
        knowledge_list: List[KnowledgeRecord],
        job_id: str
    ) -> str:
        """ç”Ÿæˆ CSV æª”æ¡ˆ"""
        pass

    async def _generate_json(
        self,
        knowledge_list: List[KnowledgeRecord],
        job_id: str
    ) -> str:
        """ç”Ÿæˆ JSON æª”æ¡ˆ"""
        pass

    async def _generate_backup(
        self,
        knowledge_list: List[KnowledgeRecord],
        job_id: str
    ) -> str:
        """ç”Ÿæˆå®Œæ•´å‚™ä»½æª”æ¡ˆï¼ˆå« embeddingï¼‰"""
        pass
```

#### BackupRestoreServiceï¼ˆæ–°å¢ï¼‰

```python
class BackupRestoreService:
    """çŸ¥è­˜åº«å‚™ä»½é‚„åŸæœå‹™"""

    async def create_backup(
        self,
        backup_config: BackupConfig,
        user_id: str
    ) -> str:
        """
        å»ºç«‹å®Œæ•´å‚™ä»½

        åŒ…å«ï¼š
        - knowledge_baseï¼ˆå« embeddingï¼‰
        - intents
        - knowledge_intent_mapping
        - vendorsï¼ˆé¸ç”¨ï¼‰

        Returns:
            backup_file_path: å‚™ä»½æª”æ¡ˆè·¯å¾‘
        """
        pass

    async def restore_backup(
        self,
        backup_file_path: str,
        restore_config: RestoreConfig,
        user_id: str
    ) -> RestoreResult:
        """
        é‚„åŸå‚™ä»½

        æµç¨‹ï¼š
        1. é©—è­‰å‚™ä»½æª”æ¡ˆ
        2. æª¢æŸ¥ç›¸å®¹æ€§
        3. è™•ç† ID æ˜ å°„
        4. åŸ·è¡Œé‚„åŸ
        5. é©—è­‰å®Œæ•´æ€§

        Returns:
            RestoreResult: é‚„åŸçµæœ
        """
        pass

    async def _validate_backup(
        self,
        backup_data: dict
    ) -> ValidationResult:
        """é©—è­‰å‚™ä»½æª”æ¡ˆå®Œæ•´æ€§"""
        pass

    async def _handle_conflicts(
        self,
        existing_data: List,
        new_data: List,
        strategy: str  # 'skip', 'overwrite', 'merge'
    ) -> List:
        """è™•ç†è³‡æ–™è¡çª"""
        pass
```

---

## API è¨­è¨ˆ

### åŒ¯å‡º API

#### 1. å»ºç«‹åŒ¯å‡ºä½œæ¥­
```http
POST /api/v1/knowledge-export/create
Content-Type: application/json

{
  "format": "excel",  // excel, csv, json, backup
  "source": "knowledge_base",  // knowledge_base, candidates, test_scenarios
  "filters": {
    "intent_ids": [1, 2, 3],
    "vendor_id": 1,  // null = å…¨åŸŸçŸ¥è­˜
    "priority": 1,  // 0, 1, null = å…¨éƒ¨
    "is_active": true,
    "date_range": {
      "start": "2025-01-01",
      "end": "2025-12-31"
    },
    "keywords": ["ç§Ÿé‡‘", "ç¹³ç´"]
  },
  "include_fields": [
    "question_summary",
    "answer",
    "intent_id",
    "priority",
    "keywords",
    "business_types",
    "target_user",
    "source_type",
    "created_at",
    "updated_at"
  ]
}

Response:
{
  "job_id": "export-123e4567-e89b-12d3-a456-426614174000",
  "status": "pending",
  "created_at": "2025-11-21T10:00:00Z"
}
```

#### 2. æŸ¥è©¢åŒ¯å‡ºä½œæ¥­ç‹€æ…‹
```http
GET /api/v1/knowledge-export/jobs/{job_id}

Response:
{
  "job_id": "export-123e4567-e89b-12d3-a456-426614174000",
  "status": "processing",  // pending, processing, completed, failed
  "progress": {
    "current": 500,
    "total": 1500,
    "percentage": 33
  },
  "result": null,  // å®Œæˆå¾ŒåŒ…å«æª”æ¡ˆè·¯å¾‘
  "created_at": "2025-11-21T10:00:00Z",
  "updated_at": "2025-11-21T10:05:00Z"
}
```

#### 3. ä¸‹è¼‰åŒ¯å‡ºæª”æ¡ˆ
```http
GET /api/v1/knowledge-export/download/{job_id}

Response:
Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
Content-Disposition: attachment; filename="knowledge_export_20251121.xlsx"

<file binary data>
```

#### 4. åˆ—å‡ºåŒ¯å‡ºæ­·å²
```http
GET /api/v1/knowledge-export/jobs?page=1&limit=20

Response:
{
  "jobs": [
    {
      "job_id": "export-123...",
      "format": "excel",
      "status": "completed",
      "total_records": 1500,
      "file_size": 2048576,
      "created_at": "2025-11-21T10:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 50
  }
}
```

#### 5. åˆªé™¤åŒ¯å‡ºè¨˜éŒ„
```http
DELETE /api/v1/knowledge-export/jobs/{job_id}

Response:
{
  "message": "Export job deleted successfully"
}
```

### å‚™ä»½é‚„åŸ API

#### 1. å»ºç«‹å‚™ä»½
```http
POST /api/v1/knowledge-backup/create
Content-Type: application/json

{
  "include_tables": [
    "knowledge_base",
    "intents",
    "knowledge_intent_mapping",
    "vendors"
  ],
  "include_embeddings": true,
  "filters": {
    "vendor_id": 1  // null = å…¨éƒ¨
  }
}

Response:
{
  "backup_id": "backup-123...",
  "status": "processing"
}
```

#### 2. é‚„åŸå‚™ä»½
```http
POST /api/v1/knowledge-backup/restore
Content-Type: multipart/form-data

file: <backup file>
conflict_strategy: "skip"  // skip, overwrite, merge

Response:
{
  "restore_id": "restore-123...",
  "status": "processing"
}
```

---

## å‰ç«¯ä»‹é¢è¨­è¨ˆ

### 1. åŒ¯å‡ºç®¡ç†ä»‹é¢

#### é é¢çµæ§‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çŸ¥è­˜åº«åŒ¯å‡º                                      [?] èªªæ˜      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Step 1: é¸æ“‡åŒ¯å‡ºæ ¼å¼                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”                       â”‚
â”‚ â”‚Excelâ”‚  â”‚ CSV â”‚  â”‚JSON â”‚  â”‚å‚™ä»½  â”‚                       â”‚
â”‚ â”‚ âœ“   â”‚  â”‚     â”‚  â”‚     â”‚  â”‚     â”‚                       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                             â”‚
â”‚ Step 2: è¨­å®šç¯©é¸æ¢ä»¶                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è³‡æ–™ä¾†æº: [æ­£å¼çŸ¥è­˜åº« â–¼]                                â”‚ â”‚
â”‚ â”‚ æ„åœ–: [è«‹é¸æ“‡... â–¼] (å¯å¤šé¸)                            â”‚ â”‚
â”‚ â”‚ æ¥­è€…: [å…¨åŸŸçŸ¥è­˜ â–¼]                                      â”‚ â”‚
â”‚ â”‚ å„ªå…ˆç´š: [å…¨éƒ¨ â–¼]                                        â”‚ â”‚
â”‚ â”‚ ç‹€æ…‹: [å…¨éƒ¨ â–¼]                                          â”‚ â”‚
â”‚ â”‚ æ—¥æœŸç¯„åœ: [2025-01-01] åˆ° [2025-12-31]                 â”‚ â”‚
â”‚ â”‚ é—œéµå­—: [________________]                              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ Step 3: é¸æ“‡åŒ¯å‡ºæ¬„ä½                                         â”‚
â”‚ â˜‘ å•é¡Œæ‘˜è¦  â˜‘ ç­”æ¡ˆ  â˜‘ æ„åœ–  â˜‘ å„ªå…ˆç´š                       â”‚
â”‚ â˜‘ é—œéµå­—  â˜‘ æ¥­æ…‹  â˜‘ ç›®æ¨™ç”¨æˆ¶  â˜‘ ä¾†æºé¡å‹                   â”‚
â”‚ â˜‘ å»ºç«‹æ™‚é–“  â˜‘ æ›´æ–°æ™‚é–“                                      â”‚
â”‚                                                             â”‚
â”‚ é è¨ˆåŒ¯å‡º: 1,234 ç­†çŸ¥è­˜                                       â”‚
â”‚                                                             â”‚
â”‚              [å–æ¶ˆ]  [é è¦½çµæœ]  [é–‹å§‹åŒ¯å‡º]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åŒ¯å‡ºé€²åº¦é¡¯ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŒ¯å‡ºé€²åº¦                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ æ­£åœ¨åŒ¯å‡ºçŸ¥è­˜åº«...                                            â”‚
â”‚                                                             â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  60%                 â”‚
â”‚                                                             â”‚
â”‚ å·²è™•ç†: 900 / 1,500 ç­†                                       â”‚
â”‚ é è¨ˆå‰©é¤˜æ™‚é–“: 2 åˆ†é˜                                         â”‚
â”‚                                                             â”‚
â”‚ ç‹€æ…‹: æ­£åœ¨ç”Ÿæˆ Excel æª”æ¡ˆ...                                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### åŒ¯å‡ºå®Œæˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŒ¯å‡ºå®Œæˆ âœ“                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ æª”æ¡ˆå·²æº–å‚™å°±ç·’ï¼                                             â”‚
â”‚                                                             â”‚
â”‚ ğŸ“„ knowledge_export_20251121_100523.xlsx                    â”‚
â”‚ å¤§å°: 2.1 MB                                                â”‚
â”‚ ç¸½ç­†æ•¸: 1,500 ç­†                                            â”‚
â”‚                                                             â”‚
â”‚               [ä¸‹è¼‰æª”æ¡ˆ]  [è¿”å›]                             â”‚
â”‚                                                             â”‚
â”‚ åŒ¯å‡ºè¨˜éŒ„å°‡ä¿ç•™ 7 å¤©ï¼Œè«‹åŠæ™‚ä¸‹è¼‰ã€‚                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. åŒ¯å‡ºæ­·å²ä»‹é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŒ¯å‡ºæ­·å²                                    [æ–°å¢åŒ¯å‡º]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ åŒ¯å‡ºæ™‚é–“          æ ¼å¼   ç‹€æ…‹    ç­†æ•¸    å¤§å°   æ“ä½œ   â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚ 2025-11-21 10:05  Excel  å®Œæˆ   1,500  2.1MB  [ä¸‹è¼‰]â”‚   â”‚
â”‚ â”‚ 2025-11-20 15:30  CSV    å®Œæˆ     500  256KB  [ä¸‹è¼‰]â”‚   â”‚
â”‚ â”‚ 2025-11-19 09:15  JSON   å¤±æ•—       -      -   [é‡è©¦]â”‚   â”‚
â”‚ â”‚ 2025-11-18 14:00  å‚™ä»½   å®Œæˆ  15,000   50MB  [ä¸‹è¼‰]â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚                          [1] 2 3 4 5 >                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. å‚™ä»½é‚„åŸä»‹é¢

#### å‚™ä»½é é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çŸ¥è­˜åº«å‚™ä»½                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ é¸æ“‡å‚™ä»½å…§å®¹:                                                â”‚
â”‚ â˜‘ çŸ¥è­˜åº«ï¼ˆknowledge_baseï¼‰                                  â”‚
â”‚ â˜‘ æ„åœ–åˆ—è¡¨ï¼ˆintentsï¼‰                                        â”‚
â”‚ â˜‘ æ„åœ–æ˜ å°„ï¼ˆknowledge_intent_mappingï¼‰                      â”‚
â”‚ â˜ æ¥­è€…è³‡è¨Šï¼ˆvendorsï¼‰                                        â”‚
â”‚                                                             â”‚
â”‚ é€²éšé¸é …:                                                    â”‚
â”‚ â˜‘ åŒ…å«å‘é‡åµŒå…¥ï¼ˆembeddingï¼‰                                  â”‚
â”‚ â˜ åƒ…å‚™ä»½ç‰¹å®šæ¥­è€…: [è«‹é¸æ“‡... â–¼]                              â”‚
â”‚                                                             â”‚
â”‚               [å–æ¶ˆ]  [å»ºç«‹å‚™ä»½]                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é‚„åŸé é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é‚„åŸå‚™ä»½                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ä¸Šå‚³å‚™ä»½æª”æ¡ˆ:                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚           æ‹–æ›³æª”æ¡ˆåˆ°æ­¤è™•æˆ–é»æ“Šé¸æ“‡æª”æ¡ˆ                      â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚           æ”¯æ´æ ¼å¼: .kbbackup                            â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ è¡çªè™•ç†ç­–ç•¥:                                                â”‚
â”‚ â—‹ è·³éç¾æœ‰è³‡æ–™ï¼ˆåƒ…æ–°å¢ä¸å­˜åœ¨çš„çŸ¥è­˜ï¼‰                         â”‚
â”‚ â—‹ è¦†è“‹ç¾æœ‰è³‡æ–™ï¼ˆç›¸åŒ ID çš„çŸ¥è­˜æœƒè¢«è¦†è“‹ï¼‰                     â”‚
â”‚ â— åˆä½µè³‡æ–™ï¼ˆä¿ç•™è¼ƒæ–°çš„ç‰ˆæœ¬ï¼‰                                 â”‚
â”‚                                                             â”‚
â”‚               [å–æ¶ˆ]  [é–‹å§‹é‚„åŸ]                             â”‚
â”‚                                                             â”‚
â”‚ âš  è­¦å‘Š: é‚„åŸæ“ä½œä¸å¯é€†ï¼Œå»ºè­°å…ˆå‚™ä»½ç•¶å‰è³‡æ–™ï¼                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è³‡æ–™åº«è¨­è¨ˆ

### æ–°å¢è¡¨ï¼šknowledge_export_jobs

```sql
CREATE TABLE knowledge_export_jobs (
    job_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id VARCHAR(100) NOT NULL,

    -- åŒ¯å‡ºé…ç½®
    export_format VARCHAR(20) NOT NULL,  -- excel, csv, json, backup
    source_table VARCHAR(50) NOT NULL,   -- knowledge_base, candidates, test_scenarios
    filters JSONB,                       -- ç¯©é¸æ¢ä»¶
    include_fields TEXT[],               -- åŒ¯å‡ºæ¬„ä½

    -- ç‹€æ…‹è¿½è¹¤
    status VARCHAR(50) NOT NULL DEFAULT 'pending',  -- pending, processing, completed, failed
    progress JSONB,                      -- {current, total, percentage}

    -- çµæœ
    file_path VARCHAR(500),              -- æª”æ¡ˆå„²å­˜è·¯å¾‘
    file_size_bytes BIGINT,              -- æª”æ¡ˆå¤§å°
    total_records INTEGER,               -- åŒ¯å‡ºç­†æ•¸
    error_message TEXT,                  -- éŒ¯èª¤è¨Šæ¯

    -- æ™‚é–“æˆ³è¨˜
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP,
    expires_at TIMESTAMP                 -- æª”æ¡ˆéæœŸæ™‚é–“ï¼ˆ7 å¤©å¾Œï¼‰
);

CREATE INDEX idx_export_jobs_user_id ON knowledge_export_jobs(user_id);
CREATE INDEX idx_export_jobs_status ON knowledge_export_jobs(status);
CREATE INDEX idx_export_jobs_created_at ON knowledge_export_jobs(created_at DESC);
```

### æ–°å¢è¡¨ï¼šknowledge_backup_jobs

```sql
CREATE TABLE knowledge_backup_jobs (
    backup_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id VARCHAR(100) NOT NULL,

    -- å‚™ä»½é…ç½®
    backup_type VARCHAR(20) NOT NULL,    -- full, partial
    include_tables TEXT[],               -- åŒ…å«çš„è¡¨
    include_embeddings BOOLEAN DEFAULT TRUE,
    filters JSONB,                       -- ç¯©é¸æ¢ä»¶

    -- ç‹€æ…‹è¿½è¹¤
    status VARCHAR(50) NOT NULL DEFAULT 'pending',
    progress JSONB,

    -- çµæœ
    file_path VARCHAR(500),
    file_size_bytes BIGINT,
    backup_metadata JSONB,               -- å‚™ä»½å…ƒè³‡æ–™

    -- æ™‚é–“æˆ³è¨˜
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP,
    expires_at TIMESTAMP
);
```

### æ–°å¢è¡¨ï¼šknowledge_restore_jobs

```sql
CREATE TABLE knowledge_restore_jobs (
    restore_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    backup_id UUID REFERENCES knowledge_backup_jobs(backup_id),
    user_id VARCHAR(100) NOT NULL,

    -- é‚„åŸé…ç½®
    conflict_strategy VARCHAR(20) NOT NULL,  -- skip, overwrite, merge
    restore_tables TEXT[],

    -- ç‹€æ…‹è¿½è¹¤
    status VARCHAR(50) NOT NULL DEFAULT 'pending',
    progress JSONB,

    -- çµæœ
    restored_count INTEGER,
    skipped_count INTEGER,
    error_count INTEGER,
    restore_log JSONB,                   -- è©³ç´°æ—¥èªŒ

    -- æ™‚é–“æˆ³è¨˜
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP
);
```

---

## å¯¦ä½œè¨ˆåŠƒ

### Phase 1: åŸºç¤åŒ¯å‡ºåŠŸèƒ½ï¼ˆå„ªå…ˆç´šï¼šé«˜ï¼‰

**æ™‚ç¨‹**: 2 é€±

**åŠŸèƒ½**:
- âœ… å»ºç«‹ `KnowledgeExportService`
- âœ… æ”¯æ´ Excel, CSV, JSON æ ¼å¼
- âœ… åŸºæœ¬ç¯©é¸æ¢ä»¶ï¼ˆæ„åœ–ã€æ¥­è€…ã€å„ªå…ˆç´šï¼‰
- âœ… å‰ç«¯åŒ¯å‡ºä»‹é¢
- âœ… API ç«¯é»å¯¦ä½œ

**äº¤ä»˜ç‰©**:
- `rag-orchestrator/services/knowledge_export_service.py`
- `rag-orchestrator/routers/knowledge_export.py`
- `knowledge-admin/frontend/src/views/KnowledgeExportView.vue`
- è³‡æ–™åº« migration è…³æœ¬
- API æ–‡æª”

**é©—æ”¶æ¨™æº–**:
- å¯åŒ¯å‡ºçŸ¥è­˜åº«ç‚º Excel/CSV/JSON æ ¼å¼
- æ”¯æ´åŸºæœ¬ç¯©é¸æ¢ä»¶
- å‰ç«¯é¡¯ç¤ºåŒ¯å‡ºé€²åº¦
- å¯ä¸‹è¼‰åŒ¯å‡ºæª”æ¡ˆ

### Phase 2: å‚™ä»½é‚„åŸåŠŸèƒ½ï¼ˆå„ªå…ˆç´šï¼šé«˜ï¼‰

**æ™‚ç¨‹**: 1.5 é€±

**åŠŸèƒ½**:
- âœ… å»ºç«‹ `BackupRestoreService`
- âœ… å®Œæ•´å‚™ä»½ï¼ˆå« embeddingï¼‰
- âœ… é‚„åŸåŠŸèƒ½ï¼ˆå«è¡çªè™•ç†ï¼‰
- âœ… å‰ç«¯å‚™ä»½é‚„åŸä»‹é¢

**äº¤ä»˜ç‰©**:
- `rag-orchestrator/services/backup_restore_service.py`
- `rag-orchestrator/routers/backup.py`
- `knowledge-admin/frontend/src/views/BackupRestoreView.vue`
- å‚™ä»½æ ¼å¼è¦ç¯„æ–‡æª”

**é©—æ”¶æ¨™æº–**:
- å¯å»ºç«‹å®Œæ•´å‚™ä»½ï¼ˆå« embeddingï¼‰
- å¯é‚„åŸå‚™ä»½ï¼ˆæ”¯æ´ skip/overwrite/mergeï¼‰
- å‚™ä»½æª”æ¡ˆé©—è­‰æ©Ÿåˆ¶
- é‚„åŸè¡çªè™•ç†æ­£ç¢º

### Phase 3: åŒ¯å…¥åŠŸèƒ½å¢å¼·ï¼ˆå„ªå…ˆç´šï¼šä¸­ï¼‰

**æ™‚ç¨‹**: 1 é€±

**åŠŸèƒ½**:
- âœ… PDF æ ¼å¼æ”¯æ´
- âœ… åŒ¯å…¥é è¦½åŠŸèƒ½
- âœ… éŒ¯èª¤æ¢å¾©æ©Ÿåˆ¶

**äº¤ä»˜ç‰©**:
- æ›´æ–° `KnowledgeImportService`ï¼ˆPDF è§£æï¼‰
- å‰ç«¯é è¦½ä»‹é¢
- æ–·é»çºŒå‚³å¯¦ä½œ

**é©—æ”¶æ¨™æº–**:
- å¯åŒ¯å…¥ PDF æª”æ¡ˆ
- å¯é è¦½åŒ¯å…¥çµæœ
- å¤±æ•—å¾Œå¯ç¹¼çºŒè™•ç†

### Phase 4: é€²éšåŠŸèƒ½ï¼ˆå„ªå…ˆç´šï¼šä¸­ï¼‰

**æ™‚ç¨‹**: 1 é€±

**åŠŸèƒ½**:
- âœ… å¹³è¡Œè™•ç†å„ªåŒ–
- âœ… é€²éšç¯©é¸æ¢ä»¶
- âœ… åŒ¯å‡ºæ­·å²ç®¡ç†

**äº¤ä»˜ç‰©**:
- å¹³è¡Œè™•ç†å¯¦ä½œ
- é€²éšç¯©é¸ UI
- æ­·å²è¨˜éŒ„ç®¡ç†

**é©—æ”¶æ¨™æº–**:
- å¯åŒæ™‚è™•ç† 2-3 å€‹æª”æ¡ˆ
- æ”¯æ´è¤‡é›œç¯©é¸æ¢ä»¶
- å¯ç®¡ç†åŒ¯å‡ºæ­·å²

### Phase 5: è³‡æ–™é·ç§»å·¥å…·ï¼ˆå„ªå…ˆç´šï¼šä½ï¼‰

**æ™‚ç¨‹**: 1.5 é€±

**åŠŸèƒ½**:
- âœ… è·¨ç’°å¢ƒé·ç§»
- âœ… å¢é‡åŒæ­¥
- âœ… ID æ˜ å°„è™•ç†

**äº¤ä»˜ç‰©**:
- é·ç§»å·¥å…·è…³æœ¬
- ä½¿ç”¨æ–‡æª”

**é©—æ”¶æ¨™æº–**:
- å¯é·ç§»çŸ¥è­˜åº«åˆ°å…¶ä»–ç’°å¢ƒ
- æ”¯æ´å¢é‡åŒæ­¥
- ID è¡çªè™•ç†æ­£ç¢º

---

## æ¸¬è©¦è¨ˆåŠƒ

### å–®å…ƒæ¸¬è©¦

#### KnowledgeExportService
- âœ… `test_query_knowledge_with_filters()` - æ¸¬è©¦å„ç¨®ç¯©é¸æ¢ä»¶
- âœ… `test_generate_excel()` - æ¸¬è©¦ Excel ç”Ÿæˆ
- âœ… `test_generate_csv()` - æ¸¬è©¦ CSV ç”Ÿæˆ
- âœ… `test_generate_json()` - æ¸¬è©¦ JSON ç”Ÿæˆ
- âœ… `test_export_large_dataset()` - æ¸¬è©¦å¤§è³‡æ–™é›†åŒ¯å‡ºï¼ˆ10,000+ ç­†ï¼‰

#### BackupRestoreService
- âœ… `test_create_full_backup()` - æ¸¬è©¦å®Œæ•´å‚™ä»½
- âœ… `test_validate_backup()` - æ¸¬è©¦å‚™ä»½é©—è­‰
- âœ… `test_restore_with_skip_strategy()` - æ¸¬è©¦è·³éç­–ç•¥
- âœ… `test_restore_with_overwrite_strategy()` - æ¸¬è©¦è¦†è“‹ç­–ç•¥
- âœ… `test_restore_with_merge_strategy()` - æ¸¬è©¦åˆä½µç­–ç•¥
- âœ… `test_restore_id_mapping()` - æ¸¬è©¦ ID æ˜ å°„

### æ•´åˆæ¸¬è©¦

#### åŒ¯å‡ºæµç¨‹
- âœ… `test_export_workflow_excel()` - å®Œæ•´åŒ¯å‡ºæµç¨‹ï¼ˆExcelï¼‰
- âœ… `test_export_with_complex_filters()` - è¤‡é›œç¯©é¸æ¢ä»¶
- âœ… `test_export_empty_result()` - ç©ºçµæœè™•ç†
- âœ… `test_export_concurrent_jobs()` - ä¸¦ç™¼ä½œæ¥­

#### å‚™ä»½é‚„åŸæµç¨‹
- âœ… `test_backup_restore_workflow()` - å®Œæ•´å‚™ä»½é‚„åŸæµç¨‹
- âœ… `test_restore_partial_backup()` - éƒ¨åˆ†é‚„åŸ
- âœ… `test_restore_version_compatibility()` - ç‰ˆæœ¬ç›¸å®¹æ€§

### æ•ˆèƒ½æ¸¬è©¦

- âœ… **å°è³‡æ–™é›†**ï¼ˆ100 ç­†ï¼‰: åŒ¯å‡ºæ™‚é–“ < 5 ç§’
- âœ… **ä¸­è³‡æ–™é›†**ï¼ˆ1,000 ç­†ï¼‰: åŒ¯å‡ºæ™‚é–“ < 30 ç§’
- âœ… **å¤§è³‡æ–™é›†**ï¼ˆ10,000 ç­†ï¼‰: åŒ¯å‡ºæ™‚é–“ < 3 åˆ†é˜
- âœ… **è¶…å¤§è³‡æ–™é›†**ï¼ˆ100,000 ç­†ï¼‰: åˆ†æ‰¹è™•ç†ï¼Œç¸½æ™‚é–“ < 15 åˆ†é˜

### ä½¿ç”¨è€…é©—æ”¶æ¸¬è©¦ï¼ˆUATï¼‰

1. **åŒ¯å‡ºåŠŸèƒ½**
   - [ ] ä½¿ç”¨è€…å¯é¸æ“‡æ ¼å¼ä¸¦åŒ¯å‡ºçŸ¥è­˜
   - [ ] ä½¿ç”¨è€…å¯è¨­å®šç¯©é¸æ¢ä»¶
   - [ ] ä½¿ç”¨è€…å¯ä¸‹è¼‰åŒ¯å‡ºæª”æ¡ˆ
   - [ ] åŒ¯å‡ºçš„æª”æ¡ˆå¯æ­£ç¢ºé–‹å•Ÿ

2. **å‚™ä»½é‚„åŸåŠŸèƒ½**
   - [ ] ä½¿ç”¨è€…å¯å»ºç«‹å®Œæ•´å‚™ä»½
   - [ ] ä½¿ç”¨è€…å¯é‚„åŸå‚™ä»½
   - [ ] è¡çªè™•ç†ç¬¦åˆé æœŸ
   - [ ] é‚„åŸå¾Œè³‡æ–™æ­£ç¢º

3. **åŒ¯å…¥å¢å¼·åŠŸèƒ½**
   - [ ] ä½¿ç”¨è€…å¯åŒ¯å…¥ PDF æª”æ¡ˆ
   - [ ] ä½¿ç”¨è€…å¯é è¦½åŒ¯å…¥çµæœ
   - [ ] éŒ¯èª¤æ¢å¾©æ­£å¸¸é‹ä½œ

---

## é¢¨éšªè©•ä¼°

### æŠ€è¡“é¢¨éšª

#### 1. å¤§è³‡æ–™é›†è™•ç†ï¼ˆé¢¨éšªï¼šä¸­ï¼‰
**å•é¡Œ**: åŒ¯å‡º 10 è¬+ ç­†çŸ¥è­˜å¯èƒ½å°è‡´è¨˜æ†¶é«”ä¸è¶³æˆ–è¶…æ™‚

**ç·©è§£æªæ–½**:
- å¯¦ä½œåˆ†æ‰¹æŸ¥è©¢ï¼ˆæ¯æ‰¹ 1,000 ç­†ï¼‰
- ä½¿ç”¨ä¸²æµå¯«å…¥ï¼ˆé¿å…ä¸€æ¬¡æ€§è¼‰å…¥å…¨éƒ¨è³‡æ–™ï¼‰
- è¨­å®šåˆç†çš„è¶…æ™‚é™åˆ¶ï¼ˆ30 åˆ†é˜ï¼‰
- æä¾›åˆ†æ‰¹ä¸‹è¼‰é¸é …

#### 2. PDF è§£ææº–ç¢ºæ€§ï¼ˆé¢¨éšªï¼šä¸­ï¼‰
**å•é¡Œ**: PDF æ ¼å¼è¤‡é›œï¼Œè§£æå¯èƒ½ä¸æº–ç¢º

**ç·©è§£æªæ–½**:
- ä½¿ç”¨å¤šå€‹è§£æåº«ï¼ˆpdfplumber + PyPDF2ï¼‰
- æä¾› OCR å‚™ç”¨æ–¹æ¡ˆï¼ˆTesseractï¼‰
- å¢åŠ äººå·¥å¯©æ ¸æ­¥é©Ÿ
- æä¾›è§£æé è¦½åŠŸèƒ½

#### 3. å‘é‡åµŒå…¥å‚™ä»½å¤§å°ï¼ˆé¢¨éšªï¼šä½ï¼‰
**å•é¡Œ**: åŒ…å« embedding çš„å‚™ä»½æª”æ¡ˆå¯èƒ½éå¸¸å¤§

**ç·©è§£æªæ–½**:
- æä¾›ã€Œä¸å« embeddingã€é¸é …
- ä½¿ç”¨å£“ç¸®ï¼ˆgzipï¼‰
- åˆ†æ‰¹ä¸‹è¼‰å¤§å‚™ä»½æª”æ¡ˆ

### æ¥­å‹™é¢¨éšª

#### 1. è³‡æ–™å¤–æ´©ï¼ˆé¢¨éšªï¼šé«˜ï¼‰
**å•é¡Œ**: åŒ¯å‡ºåŠŸèƒ½å¯èƒ½è¢«æ¿«ç”¨ï¼Œå°è‡´æ•æ„Ÿè³‡æ–™å¤–æ´©

**ç·©è§£æªæ–½**:
- åš´æ ¼çš„æ¬Šé™æ§åˆ¶ï¼ˆåƒ…ç®¡ç†å“¡å¯åŒ¯å‡ºï¼‰
- è¨˜éŒ„æ‰€æœ‰åŒ¯å‡ºæ“ä½œï¼ˆå¯©è¨ˆæ—¥èªŒï¼‰
- æª”æ¡ˆè‡ªå‹•éæœŸï¼ˆ7 å¤©å¾Œåˆªé™¤ï¼‰
- è³‡æ–™è„«æ•é¸é …ï¼ˆå»é™¤æ•æ„Ÿè³‡è¨Šï¼‰

#### 2. é‚„åŸè¡çªï¼ˆé¢¨éšªï¼šä¸­ï¼‰
**å•é¡Œ**: é‚„åŸå‚™ä»½å¯èƒ½è¦†è“‹é‡è¦è³‡æ–™

**ç·©è§£æªæ–½**:
- é‚„åŸå‰å¼·åˆ¶å‚™ä»½ç•¶å‰è³‡æ–™
- æä¾›é‚„åŸé è¦½
- è©³ç´°çš„è¡çªå ±å‘Š
- æ”¯æ´å›æ»¾æ“ä½œ

#### 3. ç‰ˆæœ¬ä¸ç›¸å®¹ï¼ˆé¢¨éšªï¼šä½ï¼‰
**å•é¡Œ**: èˆŠç‰ˆæœ¬å‚™ä»½å¯èƒ½ç„¡æ³•åœ¨æ–°ç‰ˆæœ¬é‚„åŸ

**ç·©è§£æªæ–½**:
- å‚™ä»½æª”æ¡ˆåŒ…å«ç‰ˆæœ¬è³‡è¨Š
- ç‰ˆæœ¬ç›¸å®¹æ€§æª¢æŸ¥
- æä¾›é·ç§»å·¥å…·
- ç¶­è­·å‘å¾Œç›¸å®¹æ€§

---

## é™„éŒ„

### A. æª”æ¡ˆæ ¼å¼è¦ç¯„

#### Excel æ ¼å¼è¦ç¯„
- ç·¨ç¢¼: UTF-8
- å·¥ä½œè¡¨: 3 å€‹ï¼ˆçŸ¥è­˜åˆ—è¡¨ã€æ„åœ–å°ç…§ã€åŒ¯å‡ºè³‡è¨Šï¼‰
- é¦–åˆ—: å‡çµ
- ç¯©é¸: è‡ªå‹•ç¯©é¸
- æ¬„å¯¬: è‡ªå‹•èª¿æ•´

#### CSV æ ¼å¼è¦ç¯„
- ç·¨ç¢¼: UTF-8 with BOM
- åˆ†éš”ç¬¦: é€—è™Ÿï¼ˆ,ï¼‰
- å¼•è™Ÿ: é›™å¼•è™Ÿï¼ˆ"ï¼‰
- æ›è¡Œ: \r\nï¼ˆWindows æ ¼å¼ï¼‰
- é™£åˆ—æ¬„ä½: åˆ†è™Ÿåˆ†éš”ï¼ˆå¦‚ï¼š`ç§Ÿé‡‘;ç¹³ç´;æ—¥æœŸ`ï¼‰

#### JSON æ ¼å¼è¦ç¯„
- ç·¨ç¢¼: UTF-8
- ç¸®æ’: 2 ç©ºæ ¼
- æ—¥æœŸæ ¼å¼: ISO 8601ï¼ˆ`2025-11-21T10:00:00Z`ï¼‰
- é™£åˆ—æ¬„ä½: JSON é™£åˆ—æ ¼å¼

#### å‚™ä»½æ ¼å¼è¦ç¯„
- æª”æ¡ˆé¡å‹: JSONï¼ˆ.kbbackupï¼‰
- å£“ç¸®: gzip
- ç‰ˆæœ¬: 2.0
- å¿…è¦æ¬„ä½: version, backup_time, database, metadata

### B. æ¬Šé™è¨­å®š

| è§’è‰² | åŒ¯å…¥ | åŒ¯å‡º | å‚™ä»½ | é‚„åŸ |
|-----|------|------|------|------|
| ç³»çµ±ç®¡ç†å“¡ | âœ… | âœ… | âœ… | âœ… |
| çŸ¥è­˜ç®¡ç†å“¡ | âœ… | âœ… | âœ… | âŒ |
| æ¥­è€…ç®¡ç†å“¡ | âœ…* | âœ…* | âŒ | âŒ |
| ä¸€èˆ¬ç”¨æˆ¶ | âŒ | âŒ | âŒ | âŒ |

*åƒ…é™è‡ªå·±æ¥­è€…çš„çŸ¥è­˜

### C. æ•ˆèƒ½æŒ‡æ¨™

| æ“ä½œ | è³‡æ–™é‡ | ç›®æ¨™æ™‚é–“ | è¨˜æ†¶é«”ä½¿ç”¨ |
|------|--------|---------|-----------|
| åŒ¯å‡º Excel | 1,000 | < 30s | < 500MB |
| åŒ¯å‡º Excel | 10,000 | < 3min | < 1GB |
| åŒ¯å‡º CSV | 10,000 | < 2min | < 500MB |
| åŒ¯å‡º JSON | 10,000 | < 2min | < 500MB |
| å®Œæ•´å‚™ä»½ | 100,000 | < 15min | < 2GB |
| é‚„åŸå‚™ä»½ | 100,000 | < 20min | < 2GB |

### D. ç›¸é—œæ–‡æª”

- [çµ±ä¸€ Job ç³»çµ±è¨­è¨ˆæ–‡ä»¶](./UNIFIED_JOB_SYSTEM_DESIGN.md) - âœ… å·²å®Œæˆ
- [çµ±ä¸€ Job ç³»çµ±æ¸¬è©¦å ±å‘Š](./UNIFIED_JOB_TESTING_REPORT.md) - âœ… å·²å®Œæˆ
- [çŸ¥è­˜åŒ¯å…¥åŠŸèƒ½æ–‡æª”](../features/KNOWLEDGE_IMPORT.md)
- [API æ–‡æª”](../api/KNOWLEDGE_API.md)
- [è³‡æ–™åº« Schema](../database/SCHEMA.md)
- [éƒ¨ç½²æŒ‡å—](../deployment/DEPLOYMENT_GUIDE.md)

---

## æ›´æ–°æ­·å²

| æ—¥æœŸ       | ç‰ˆæœ¬ | æ›´æ–°å…§å®¹                                    | ä½œè€…        |
|------------|------|---------------------------------------------|-------------|
| 2025-11-18 | 1.0  | åˆç‰ˆè¦åŠƒæ–‡ä»¶                                | Claude Code |
| 2025-11-21 | 2.0  | æ·»åŠ åŒ¯å‡ºåŠŸèƒ½è©³ç´°è¦åŠƒ                        | Claude Code |
| 2025-11-21 | 2.1  | æ›´æ–°ç‚ºå·²å®Œæˆç‹€æ…‹ï¼Œæ·»åŠ çµ±ä¸€ Job ç³»çµ±æ•´åˆèªªæ˜ | Claude Code |

---

**æ–‡æª”ç‰ˆæœ¬**: 2.1
**æœ€å¾Œæ›´æ–°**: 2025-11-21
**ç¶­è­·è€…**: é–‹ç™¼åœ˜éšŠ
**ç‹€æ…‹**: âœ… æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆï¼ˆåŒ¯å…¥ã€åŒ¯å‡ºã€çµ±ä¸€ Job ç³»çµ±ï¼‰
