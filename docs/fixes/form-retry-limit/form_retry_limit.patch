--- a/rag-orchestrator/services/form_manager.py
+++ b/rag-orchestrator/services/form_manager.py
@@ -795,16 +795,78 @@ class FormManager:
             if api_result and not api_result.get('success'):
                 error_type = api_result.get('error')

                 # ç‰¹å®šéŒ¯èª¤é¡å‹ï¼šéœ€è¦ç”¨æˆ¶é‡æ–°è¼¸å…¥ï¼ˆä¸å®Œæˆè¡¨å–®ï¼‰
                 if error_type in ['ambiguous_match', 'no_match', 'invalid_input']:
-                    print(f"âš ï¸ API è¿”å› {error_type}ï¼Œä¿æŒè¡¨å–®ç‹€æ…‹ç‚º COLLECTING")
+                    # ========== æ–°å¢ï¼šé‡è©¦æ¬¡æ•¸é™åˆ¶é‚è¼¯ ==========
+                    # å¾ metadata ç²å–é‡è©¦æ¬¡æ•¸
+                    metadata = session_state.get('metadata', {})
+                    retry_count = metadata.get('retry_count', 0)
+                    MAX_RETRIES = 2  # æœ€å¤šé‡è©¦ 2 æ¬¡
+
+                    # å¢åŠ é‡è©¦æ¬¡æ•¸
+                    retry_count += 1
+
+                    print(f"ğŸ”„ [è¡¨å–®é‡è©¦] API éŒ¯èª¤é¡å‹: {error_type}, é‡è©¦æ¬¡æ•¸: {retry_count}/{MAX_RETRIES}")
+
+                    # æª¢æŸ¥æ˜¯å¦è¶…éé‡è©¦æ¬¡æ•¸
+                    if retry_count >= MAX_RETRIES:
+                        # è¶…éé‡è©¦æ¬¡æ•¸ï¼Œè‡ªå‹•å–æ¶ˆè¡¨å–®
+                        await self.update_session_state(
+                            session_id=session_state['session_id'],
+                            state=FormState.CANCELLED
+                        )
+
+                        # æ ¹æ“šéŒ¯èª¤é¡å‹æä¾›ä¸åŒçš„çµæŸè¨Šæ¯
+                        cancel_messages = {
+                            'no_match': (
+                                "âŒ **æŸ¥è©¢å¤±æ•—**\n\n"
+                                "å·²å˜—è©¦ 2 æ¬¡ï¼Œä»ç„¡æ³•æ‰¾åˆ°åŒ¹é…çš„è³‡æ–™ã€‚\n\n"
+                                "å¯èƒ½åŸå› ï¼š\n"
+                                "â€¢ è¼¸å…¥çš„åœ°å€ä¸åœ¨æœå‹™ç¯„åœå…§\n"
+                                "â€¢ åœ°å€æ ¼å¼ä¸æ­£ç¢º\n"
+                                "â€¢ è©²åœ°å€å°šæœªç™»éŒ„åœ¨ç³»çµ±ä¸­\n\n"
+                                "è«‹ç¢ºèªåœ°å€è³‡è¨Šå¾Œé‡æ–°æŸ¥è©¢ï¼Œæˆ–è¯ç¹«å®¢æœå”åŠ©ã€‚"
+                            ),
+                            'ambiguous_match': (
+                                "âŒ **æŸ¥è©¢ä¸­æ–·**\n\n"
+                                "é€£çºŒ 2 æ¬¡ç„¡æ³•ç²¾ç¢ºå®šä½æ‚¨çš„åœ°å€ã€‚\n"
+                                "è«‹æä¾›æ›´å®Œæ•´çš„åœ°å€è³‡è¨Šï¼ˆåŒ…å«æ¨“å±¤ã€è™Ÿç¢¼ç­‰ç´°ç¯€ï¼‰å¾Œé‡æ–°æŸ¥è©¢ã€‚"
+                            ),
+                            'invalid_input': (
+                                "âŒ **è¼¸å…¥ç„¡æ•ˆ**\n\n"
+                                "é€£çºŒ 2 æ¬¡è¼¸å…¥æ ¼å¼éŒ¯èª¤ã€‚\n"
+                                "è«‹åƒè€ƒæ­£ç¢ºæ ¼å¼ç¯„ä¾‹å¾Œé‡æ–°é–‹å§‹ã€‚"
+                            )
+                        }
+
+                        cancel_message = cancel_messages.get(
+                            error_type,
+                            "âŒ **æŸ¥è©¢å·²å–æ¶ˆ**\n\nå·²é”åˆ°æœ€å¤§é‡è©¦æ¬¡æ•¸ã€‚è«‹ç¢ºèªè³‡æ–™å¾Œé‡æ–°é–‹å§‹ã€‚"
+                        )
+
+                        return {
+                            "answer": cancel_message,
+                            "form_completed": False,
+                            "form_cancelled": True,
+                            "auto_cancelled": True,
+                            "reason": "exceeded_retry_limit",
+                            "retry_count": retry_count,
+                            "error_type": error_type
+                        }
+
+                    # å°šæœªè¶…éé‡è©¦æ¬¡æ•¸ï¼Œæ›´æ–° metadata ä¸¦ç¹¼çºŒ
+                    metadata['retry_count'] = retry_count
+                    await self.update_session_state(
+                        session_id=session_state['session_id'],
+                        state=FormState.COLLECTING,
+                        metadata=metadata
+                    )

                     # ç²å–ç•¶å‰æ¬„ä½ï¼ˆæœ€å¾Œä¸€å€‹æ¬„ä½ï¼‰
                     current_field_index = session_state['current_field_index']
                     current_field = form_schema['fields'][current_field_index]

-                    # å›é€€åˆ°ç•¶å‰æ¬„ä½ï¼Œè®“ç”¨æˆ¶é‡æ–°è¼¸å…¥
-                    await self.update_session_state(
-                        session_id=session_state['session_id'],
-                        state=FormState.COLLECTING
-                        # ä¿æŒ current_field_index ä¸è®Š
-                    )
+                    # æ ¹æ“šé‡è©¦æ¬¡æ•¸èª¿æ•´æç¤ºè¨Šæ¯
+                    error_message = api_result.get('formatted_response', 'è¼¸å…¥ç„¡æ•ˆï¼Œè«‹é‡æ–°è¼¸å…¥ã€‚')
+
+                    # åŠ å…¥é‡è©¦æ¬¡æ•¸æç¤º
+                    if retry_count == 1:
+                        retry_hint = "\n\nğŸ’¡ **æç¤º**ï¼šè«‹ç¢ºèªè¼¸å…¥çš„åœ°å€å®Œæ•´ä¸”æ­£ç¢ºï¼ˆç¬¬ 1 æ¬¡é‡è©¦ï¼‰"
+                    else:  # retry_count == 2
+                        retry_hint = "\n\nâš ï¸ **æœ€å¾Œä¸€æ¬¡æ©Ÿæœƒ**ï¼šè«‹ä»”ç´°æª¢æŸ¥åœ°å€æ ¼å¼ï¼ˆæœ€å¾Œä¸€æ¬¡é‡è©¦ï¼‰"

-                    # è¿”å›éŒ¯èª¤è¨Šæ¯ + é‡æ–°æç¤º
-                    error_message = api_result.get('formatted_response', 'è¼¸å…¥ç„¡æ•ˆï¼Œè«‹é‡æ–°è¼¸å…¥ã€‚')
+                    # çµ„åˆéŒ¯èª¤è¨Šæ¯
+                    combined_message = f"{error_message}{retry_hint}\n\n---\n\n{current_field['prompt']}\n\nï¼ˆæˆ–è¼¸å…¥ã€Œ**å–æ¶ˆ**ã€çµæŸå¡«å¯«ï¼‰"

                     return {
-                        "answer": f"{error_message}\n\n---\n\n{current_field['prompt']}\n\nï¼ˆæˆ–è¼¸å…¥ã€Œ**å–æ¶ˆ**ã€çµæŸå¡«å¯«ï¼‰",
+                        "answer": combined_message,
                         "form_completed": False,
                         "needs_retry": True,
-                        "retry_field": current_field['field_name']
+                        "retry_field": current_field['field_name'],
+                        "retry_count": retry_count,
+                        "max_retries": MAX_RETRIES
                     }
+                    # ========== é‡è©¦æ¬¡æ•¸é™åˆ¶é‚è¼¯çµæŸ ==========

         # 3. API æˆåŠŸæˆ–ç„¡éœ€ APIï¼Œæ­£å¸¸å®Œæˆè¡¨å–®
@@ -636,6 +698,13 @@ class FormManager:
         collected_data[current_field['field_name']] = extracted_value
         next_field_index = current_field_index + 1

+        # é‡ç½®é‡è©¦è¨ˆæ•¸å™¨ï¼ˆæˆåŠŸæ”¶é›†è³‡æ–™ï¼‰
+        metadata = session_state.get('metadata', {})
+        if 'retry_count' in metadata:
+            metadata['retry_count'] = 0
+            await self.update_session_state(
+                session_id=session_id,
+                metadata=metadata
+            )
+
         # 6. æª¢æŸ¥æ˜¯å¦å®Œæˆæ‰€æœ‰æ¬„ä½