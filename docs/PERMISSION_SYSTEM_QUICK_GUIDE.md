# 權限系統快速使用指南

> 🎉 完整的 RBAC 權限管理系統已上線！

---

## 🚀 快速開始

### 1. 訪問系統

```bash
# 系統已運行，直接訪問：
瀏覽器開啟: http://localhost:8087

# 登入帳號
帳號: admin
密碼: admin123
```

### 2. 訪問角色管理

進入系統後，點擊導航選單的「角色管理」或直接訪問：
```
http://localhost:8087/role-management
```

---

## 📋 核心功能

### ✅ 角色管理

#### 查看角色列表
- 列出所有系統角色和自訂角色
- 顯示權限數量和用戶數量
- 支持搜尋和篩選

#### 創建自訂角色
1. 點擊「新增角色」
2. 填寫角色資訊：
   - **角色代碼**: 英數字和底線，3-50 字元（創建後不可修改）
   - **顯示名稱**: 用於 UI 顯示
   - **說明**: 角色用途說明
3. 選擇權限：
   - 使用搜尋快速找到需要的權限
   - 按資源分組瀏覽
   - 支持全選/清空
4. 提交創建

#### 編輯角色
1. 點擊角色列表的「編輯」按鈕
2. 修改顯示名稱、說明或權限
3. 保存變更

#### 查看角色詳情
- 點擊「查看詳情」查看完整的角色資訊
- 包含權限列表（按資源分組）

#### 刪除角色
- 自訂角色可以刪除
- 系統角色不可刪除（受保護）

---

### ✅ 管理員角色分配

#### 創建管理員時分配角色
1. 進入「管理員管理」頁面
2. 點擊「新增管理員」
3. 填寫基本資料
4. 在「角色分配」區域選擇一個或多個角色
5. 提交創建

#### 修改現有管理員的角色
1. 點擊管理員列表的「編輯」
2. 在「角色分配」區域修改角色
3. 保存變更

---

## 🎯 預設角色說明

| 角色 | 代碼 | 權限數 | 適用對象 |
|------|------|--------|----------|
| 超級管理員 | `super_admin` | 41 | 系統最高權限，所有功能 |
| 知識庫管理員 | `knowledge_manager` | 15 | 知識庫、意圖、文檔管理 |
| 測試人員 | `tester` | 7 | 測試場景、回測功能 |
| 業者管理員 | `vendor_manager` | 7 | 業者管理、聊天測試 |
| 配置管理員 | `config_manager` | 8 | 系統配置、業務類型 |
| 唯讀用戶 | `viewer` | 3 | 僅查看權限 |

---

## 🔐 權限類別

系統包含 **9 個資源類別**，共 **41 個權限**：

| 資源 | 圖標 | 權限數 | 包含操作 |
|------|------|--------|----------|
| 知識庫管理 | 📚 | 9 | view, create, update, delete, import, export, reclassify, review, approve |
| 意圖管理 | 🎯 | 5 | view, create, update, delete, review |
| 測試與回測 | 🧪 | 5 | view, create, execute, review, delete |
| 業者管理 | 🏢 | 4 | view, create, update, delete |
| 平台 SOP | 📄 | 4 | view, create, update, delete |
| 配置管理 | ⚙️ | 3 | view, update, cache_clear |
| 文檔處理 | 📝 | 1 | convert |
| 管理員管理 | 👤 | 5 | view, create, update, delete, manage_password |
| 角色管理 | 🔐 | 5 | view, create, update, delete, assign |

---

## 💡 使用技巧

### 1. 自訂角色最佳實踐

```
✅ 良好的命名
角色代碼: customer_support
顯示名稱: 客服人員
說明: 負責客服相關知識庫維護

❌ 避免
角色代碼: role1
顯示名稱: 角色
說明: (空白)
```

### 2. 權限分配原則

- **最小權限原則**: 只給予必要的權限
- **角色分離**: 不同職責使用不同角色
- **定期審查**: 定期檢查角色權限是否合適

### 3. 多角色分配

一個管理員可以擁有多個角色，權限會自動合併：

```
管理員 A:
├─ 知識庫管理員 (15 個權限)
└─ 測試人員 (7 個權限)
= 合併後擁有 22 個權限 (去重)
```

---

## 🛠️ 常見操作

### 創建專用角色範例

#### 客服人員角色
```
角色代碼: customer_support
顯示名稱: 客服人員
說明: 負責客服相關知識庫的日常維護

建議權限:
✅ knowledge:view - 查看知識庫
✅ knowledge:create - 新增知識
✅ knowledge:update - 更新知識
✅ intent:view - 查看意圖
❌ knowledge:delete - 不給刪除權限
❌ config:* - 不給配置權限
```

#### 內容審核員角色
```
角色代碼: content_reviewer
顯示名稱: 內容審核員
說明: 負責審核 AI 建議和知識提交

建議權限:
✅ knowledge:view - 查看知識庫
✅ knowledge:review - 審核知識
✅ knowledge:approve - 批准知識
✅ intent:review - 審核意圖
❌ knowledge:delete - 不給刪除權限
```

---

## 📱 UI 功能說明

### 權限選擇器功能

- **🔍 搜尋**: 輸入關鍵字快速找到權限
- **📦 分組**: 按資源類型分組顯示
- **▶️ 展開/收合**: 點擊分組標題
- **✓ 全選**: 一鍵選擇所有權限
- **× 清空**: 一鍵清除所有選擇
- **計數器**: 即時顯示已選擇數量

### 角色列表功能

- **🔍 搜尋**: 搜尋角色名稱或說明
- **🔽 篩選**: 篩選系統/自訂角色
- **👁 查看**: 查看角色詳情
- **✏️ 編輯**: 修改角色資訊
- **🗑 刪除**: 刪除自訂角色

---

## 🔒 安全提示

1. **超級管理員**: 謹慎分配，建議只有 1-2 個超級管理員
2. **系統角色**: 不可刪除，確保系統穩定性
3. **角色代碼**: 創建後不可修改，請謹慎命名
4. **權限審查**: 定期檢查角色權限，移除不必要的權限

---

## 🐛 遇到問題？

### API 錯誤

如果遇到 API 錯誤，檢查服務狀態：
```bash
docker-compose ps
```

所有服務應該是 `Up` 狀態。

### 權限不生效

1. 確認角色已正確分配給管理員
2. 重新登入以刷新權限
3. 檢查路由的 `meta.permissions` 配置

### 頁面無法訪問

1. 確認您的帳號擁有相應權限
2. 檢查路由守衛是否正確配置
3. 查看瀏覽器控制台錯誤訊息

---

## 📚 相關文檔

- [完整設計文檔](./PERMISSION_SYSTEM_DESIGN.md)
- [UI 設計規範](./PERMISSION_UI_DESIGN.md)
- [測試報告](./PERMISSION_SYSTEM_TEST_REPORT.md)
- [實作快速開始](./PERMISSION_QUICK_START.md)

---

## ✨ 下一步

系統現已完全就緒，您可以：

1. ✅ 立即開始使用角色管理功能
2. ✅ 根據團隊需求創建自訂角色
3. ✅ 為管理員分配合適的角色
4. ✅ 享受完整的權限控制帶來的安全性

有任何問題或建議，歡迎隨時反饋！🎉
